<section class="main-section">
  <br><br>  <br><br>

  <div class="analytics-container">
    <h2>Analytics Page</h2>
    <div class="input-container">
      <div class="input-group">
        <label for="startDate">Start Date:</label>
        <input id="startDate" type="date" [(ngModel)]="startDate">
      </div>
      <div class="input-group">
        <label for="endDate">End Date:</label>
        <input id="endDate" type="date" [(ngModel)]="endDate">
      </div>
    </div>
    <button (click)="getAnalytics()" [disabled]="!startDate || !endDate" class="get-analytics-btn">
      GET ANALYTICS
    </button>
    <div *ngIf="!startDate || !endDate" class="empty-state">
      <p>Please select both start and end dates to proceed.</p>
    </div>

    <div class="report">

      <div *ngIf="goals.length > 0" class="goals-section">
        <h3>Report from {{ startDate }} to {{ endDate }}</h3>
        <h4>Goals:</h4>
        <ul>
          <li *ngFor="let goal of goals">{{ goal }}</li>
        </ul>
      </div>

      <div *ngIf="chartImages.length > 0" class="images-section">
        <h4>Analytics Images:</h4>
        <div class="images-container">
          <div *ngFor="let img of chartImages" class="image-wrapper">
            <img [src]="img" alt="Analytics Chart" class="analytics-image" />
          </div>
        </div>
      </div>

<div *ngIf="metrics" class="goals-section">
  <h4>Metrics:</h4>

  <!-- Sentiment Counts -->
  <h5>Sentiment Counts</h5>
  <table>
    <tr>
      <th>Sentiment</th>
      <th>Count</th>
    </tr>
    <tr *ngFor="let sentiment of getMetricKeys('sentiment_counts')">
      <td>{{ sentiment }}</td>
      <td>{{ metrics.sentiment_counts[sentiment] }}</td>
    </tr>
  </table>

  <!-- Topic Counts -->
  <h5>Topic Counts</h5>
  <table>
    <tr>
      <th>Topic</th>
      <th>Count</th>
    </tr>
    <tr *ngFor="let topic of getMetricKeys('topic_counts')">
      <td>{{ topic || '(empty)' }}</td>
      <td>{{ metrics.topic_counts[topic] }}</td>
    </tr>
  </table>

  <!-- Top 5 Topics -->
  <h5>Top 5 Topics</h5>
  <table>
    <tr>
      <th>Topic</th>
      <th>Count</th>
    </tr>
    <tr *ngFor="let topic of getMetricKeys('top_5_topics')">
      <td>{{ topic || '(empty)' }}</td>
      <td>{{ metrics.top_5_topics[topic] }}</td>
    </tr>
  </table>

  <!-- Most Frequent Sentiment Per Topic -->
  <h5>Most Frequent Sentiment Per Topic</h5>
  <table>
    <tr>
      <th>Topic</th>
      <th>Sentiment</th>
    </tr>
    <tr *ngFor="let topic of getMetricKeys('most_freq_sentiment_per_topic')">
      <td>{{ topic || '(empty)' }}</td>
      <td>{{ metrics.most_freq_sentiment_per_topic[topic] }}</td>
    </tr>
  </table>

  <!-- Most Frequent Topic Per Sentiment -->
  <h5>Most Frequent Topic Per Sentiment</h5>
  <table>
    <tr>
      <th>Sentiment</th>
      <th>Topic</th>
    </tr>
    <tr *ngFor="let sentiment of getMetricKeys('most_freq_topic_per_sentiment')">
      <td>{{ sentiment }}</td>
      <td>{{ metrics.most_freq_topic_per_sentiment[sentiment] || '(empty)' }}</td>
    </tr>
  </table>
</div>

    </div>
  </div>
</section>

  <section class="about-feedpulse">
    <div class="container">
      <div class="about-content">
        <!-- Image on the left -->
        <div class="about-image">
          <img src="assets/analysis.png" alt="About FeddPulse">
        </div>

        <!-- Content on the right -->
        <div class="about-text">
          <h2>GENERATE REPORTS</h2>
          <h1>We Will Do Our Best To Grow Your Business</h1>
          <p class="description">
            At FeedPulse, we empower your brand by transforming customer feedback into actionable insights, fueling sustainable growth and innovation.
          </p>
        </div>
      </div>
    </div>
  </section>
