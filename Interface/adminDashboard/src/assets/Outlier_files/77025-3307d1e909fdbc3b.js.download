"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[77025],{113463:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(824246),o=n(679892),s=n.n(o);n(827378);var a=e=>(0,r.jsxs)("kbd",{style:e.style,className:"jsx-bf0fad026d3b48ff kbd",children:[e.children,(0,r.jsx)(s(),{id:"bf0fad026d3b48ff",children:".kbd.jsx-bf0fad026d3b48ff{background-color:var(--color-RemoGray05);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;display:inline-block;margin:0 2px;padding:0 4px;min-width:20px;color:var(--color-RemoGray75);text-align:center;font-family:var(--font-family-code);font-weight:500;font-size:11px;text-transform:capitalize;line-height:20px;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.kbd.jsx-bf0fad026d3b48ff:hover{background-color:var(--color-RemoGray10);color:black}"})]})},358720:function(e,t,n){n.d(t,{bK:function(){return p},Hp:function(){return m},RZ:function(){return f},t0:function(){return h},Bi:function(){return g},dK:function(){return v},xg:function(){return x},M$:function(){return y},Ur:function(){return k},l4:function(){return C},Is:function(){return T},gL:function(){return N},IQ:function(){return E},pk:function(){return P},BH:function(){return R},LD:function(){return A},QA:function(){return L},H9:function(){return _},Yu:function(){return Z},o7:function(){return F},qn:function(){return W},rt:function(){return K},Kx:function(){return J},S2:function(){return q},t9:function(){return X},mQ:function(){return Q},Vf:function(){return ee},L8:function(){return ne},xy:function(){return oe},a9:function(){return ae},jH:function(){return ie},lp:function(){return le},uF:function(){return ce},rg:function(){return ue},jP:function(){return pe},s4:function(){return me},MB:function(){return fe},Xn:function(){return he},DL:function(){return ge},Cw:function(){return be},LG:function(){return xe},v2:function(){return ye},uO:function(){return we},cf:function(){return ke}});var r=n(827378),o=n(236125),s=n(225729),a=n(67370),i=n(854358),l=n(844159),c=n(298784),d=n(900218);const u="**DISCLAIMER: The selected response is a placeholder for the chat history even though you selected no preference.**",p="**DISCLAIMER: There is no model response in this turn. Expand this section to view the steps in the turn.**",m="**DISCLAIMER: This turn has no visible steps and no model response.**";function f(){const e=(0,r.useContext)(s.p);if(!(null===e||void 0===e?void 0:e.current))throw Error("You have to wrap Chat component into ChatStoreContextProvider");return e}function h(e){const t=(0,r.useContext)(s.p);if(!(null===t||void 0===t?void 0:t.current))throw Error("You have to wrap Chat component into ChatStoreContextProvider");return(0,o.oR)(t.current,e)}function g(e){return Object.values(e.completedSteps).every((e=>!1!==e))}const b=(0,a.Mt)(((e,t)=>e.stepParams[t]));function v(e){return h((t=>b(t,e)))}function x(){return h((e=>e.stepParams.at(-1)))}function y(){return h((e=>e.config))}const w=(0,a.HP)((e=>e.stepParams.slice(0,e.config.before.length)));function k(){return h((e=>w(e)))}(0,a.HP)((e=>{const t=e.config.turn.length+1,n=e.stepParams.filter((e=>e.stage===l.ChatTaskParamsStages.Turn)),r=[];for(let o=0;o<n.length;o+=t){const e=n.slice(o,o+t);r.push(e)}return r}));const j=(0,a.HP)((e=>{const t=e.config.turn.length+1,n=e.stepParams.filter((e=>e.stage===l.ChatTaskParamsStages.Turn)),r=[];for(let o=0;o<n.length;o+=t)r.push(n[o].turn);return r}));function C(){return h((e=>j(e)))}const S=(0,a.Mt)(((e,t)=>e.stepParams.filter((e=>e.stage===l.ChatTaskParamsStages.Turn&&e.turn===t))));function T(e){return h((t=>S(t,e)))}const O=(0,a.Mt)(((e,t)=>{const n=e.stepParams.find((e=>e.stage===l.ChatTaskParamsStages.Turn&&e.turn===t&&e.type===i.InteractionStepType.MultiTurnContinue));if(!n)return!1;const r=e.responses.at(null===n||void 0===n?void 0:n.responseIndex);return!(0,c.isNil)(r)&&r.contextType!==i.ContextType.Skipped}));function N(e){return h((t=>O(t,e)))}function E(e){return h((t=>{const n=t.stepParams.find((t=>t.stage===l.ChatTaskParamsStages.Turn&&t.turn===e&&t.type===i.InteractionStepType.MultiTurnContinue));if(!n)return[];const r=t.responses.at(n.responseIndex);if(!r)return[];const o=r.output,s=r.context,a=s.message.length?s.message:function(e,t,n){const r=(0,d.getMostRecentModelSelectorResponseForTurn)(e,t,n);return r.length?`${u}\n\n${r}`:p}(t.responses,e,t.stepParams),c={role:i.MessageRole.Assistant,content:a,attachments:s.modelResponseAttachments};if(!s.shouldContinue)return[c];return[c,{role:s.role||i.MessageRole.User,content:o,attachments:s.attachments}]}))}function P(e){return h((t=>{const n=t.stepParams.find((t=>t.stage===l.ChatTaskParamsStages.Turn&&t.turn===e&&t.type===i.InteractionStepType.MultiTurnContinue));if(!n)return;const r=t.responses.at(n.responseIndex);return r?r.context:void 0}))}const M=(0,a.Mt)(((e,t)=>{const n=e.stepParams.find((e=>e.stage===l.ChatTaskParamsStages.Turn&&e.turn===t&&e.type===i.InteractionStepType.MultiTurnContinue));if(n)return e.responses.at(n.responseIndex)}));function R(e){return h((t=>M(t,e)))}const I=(0,a.HP)((e=>e.stepParams.filter((e=>e.stage===l.ChatTaskParamsStages.After))));function A(){return h((e=>I(e)))}const D=(0,a.Mt)(((e,t)=>(0,d.isStepSequentiallySkippedAndVisible)(e.stepParams,e.responses,t,e.reviewLevel)));function L(e){return h((t=>D(t,e)))}const B=(0,a.Mt)(((e,t)=>e.responses.length===t));function _(e){return h((t=>B(t,e)))}const $=(0,a.Mt)(((e,t)=>{const n=e.stepParams.at(t);return!!n&&(0,d.isStepVisible)(n,e.reviewLevel)}));function Z(e){return h((t=>$(t,e)))}const z=(e,t)=>{const n=e.stepParams.at(t);return!!n&&(0,d.isConditionallyVisible)(n,e.responses,t,e.config.templateVariables)},H=(0,a.Mt)(((e,t)=>z(e,t)));function F(e){return h((t=>H(t,e)))}const V=(0,a.Mt)(((e,t,n)=>{const r=e.responses.at(t);if(r&&(n||(null===r||void 0===r?void 0:r.contextType)!==i.ContextType.Skipped))return r}));function W(e,t){return h((n=>V(n,e,null!==t&&void 0!==t&&t)))}const U=(0,a.Mt)(((e,t,n)=>{let r=e.responses.at(t);r&&(n||(null===r||void 0===r?void 0:r.contextType)!==i.ContextType.Skipped)||(r=void 0);const o=e.completedSteps;return!!r&&o[t]}));function K(e,t){return h((n=>U(n,e,null!==t&&void 0!==t&&t)))}function J(){return h((e=>{const t=e.config.before.find((e=>e.type===i.InteractionStepType.PromptInput));var n;const r=null!==(n=(0,c.get)(t,"[0].params.params.display_type"))&&void 0!==n?n:(0,c.get)(t,"params.display_type");return null!==r&&void 0!==r?r:i.ChatMessageDisplayType.Markdown}))}const G=(0,a.HP)((e=>e.config.turn.filter((e=>l.RESPONSE_GENERATOR_STEPS.includes(e.type))).at(-1)));function q(){return h((e=>G(e)))}const Y=(0,a.HP)((e=>{const t=(0,c.groupBy)(e.stepParams.filter((e=>e.stage===l.ChatTaskParamsStages.Turn)),(({turn:e})=>e));return!Object.values(t).every((t=>{const n=t.at(-1);return!(0,c.isNil)(n)&&n.type===i.InteractionStepType.MultiTurnContinue&&!(0,c.isNil)(e.responses.at(n.responseIndex))}))}));function X(){return h((e=>Y(e)))}function Q(e){return h((t=>t.stepParams.filter((t=>t.stage===l.ChatTaskParamsStages.Turn&&t.turn===e&&t.type!==i.InteractionStepType.MultiTurnContinue)).map((e=>e.responseIndex)).some((e=>!t.completedSteps[e]))))}function ee(e){return h((t=>{if((0,c.isNil)(e))return[];var n,r;return(null!==(n=t.invalidStepIndices)&&void 0!==n?n:[]).filter((t=>(null===t||void 0===t?void 0:t.turnIndex)===e)).map((e=>null!==(r=e.errorMessage)&&void 0!==r?r:"This turn has some steps that are not completed."))}))}const te=(0,a.Mt)(((e,t)=>{const n=((0,c.isNil)(t)?e.stepParams:e.stepParams.slice(0,t+1)).filter((e=>e.stage===l.ChatTaskParamsStages.Turn)).at(-1);var r;return(null!==(r=null===n||void 0===n?void 0:n.turn)&&void 0!==r?r:0)+1}));function ne(e){return h((t=>te(t,e)))}const re=(0,a.Mt)(((e,t)=>{const n=(0,c.isNil)(t)?e.responses:e.responses.slice(0,t);for(let r=n.length-1;r>=0;r--){const t=n[r];if(t.contextType!==i.ContextType.Skipped&&l.RESPONSE_GENERATOR_STEPS.includes(t.type)&&z(e,r))return t.output;if([i.InteractionStepType.PromptInput,i.InteractionStepType.MultiTurnContinue].includes(t.type))break}return""}));function oe(e){return h((t=>re(t,e)))}const se=(0,a.Mt)(((e,t)=>{const n=e.responses.filter(((n,r)=>e.stepParams[n.index].turn===t&&n.contextType!==i.ContextType.Skipped&&l.RESPONSE_GENERATOR_STEPS.includes(n.type)&&z(e,r))).at(-1);var r;return null!==(r=null===n||void 0===n?void 0:n.output)&&void 0!==r?r:""}));function ae(e){return h((t=>se(t,e)))}function ie(e){return h((t=>{const n=(0,c.isNil)(e)?t.responses:t.responses.slice(0,e);for(let e=n.length-1;e>=0;e--){const r=n[e];if(r.contextType!==i.ContextType.Skipped&&l.RESPONSE_GENERATOR_STEPS.includes(r.type)&&z(t,e))return r;if([i.InteractionStepType.PromptInput,i.InteractionStepType.MultiTurnContinue].includes(r.type))break}return null}))}const le=(0,a.Mt)(((e,t)=>{const n=((0,c.isNil)(t)?e.responses:e.responses.slice(0,t)).filter((e=>[i.InteractionStepType.PromptInput,i.InteractionStepType.MultiTurnContinue].includes(e.type))).at(-1);return n?(0,d.producePromptWithReferenceTexts)(n):""}));function ce(e){return h((t=>le(t,e)))}const de=(0,a.Mt)(((e,t,n)=>{const r=e.responses.slice(0,t).filter((e=>[i.InteractionStepType.PromptInput,i.InteractionStepType.MultiTurnContinue].includes(e.type)&&e.step_id===n)).at(-1);return r?(0,d.producePromptWithReferenceTexts)(r):""}));function ue(e,t){return h((n=>t?de(n,e,t):""))}function pe(e){return h((t=>{const n=(0,c.isNil)(e)?t.responses:t.responses.slice(0,e);return 0===n.length?null:n.at(-1)}))}function me(e){return h((t=>{var n;const r=((0,c.isNil)(e)?t.responses:t.responses.slice(0,e)).filter((e=>[i.InteractionStepType.PromptInput,i.InteractionStepType.MultiTurnContinue].includes(e.type))).at(-1);if(!r)return[];const o=null===(n=r.context)||void 0===n?void 0:n.attachments;return null!==o&&void 0!==o?o:[]}))}function fe(e,t){return h((n=>{var r;return null!==(r=((0,c.isNil)(t)?n.responses:n.responses.slice(0,t)).filter(((t,r)=>t.type===e&&t.contextType!==i.ContextType.Skipped&&z(n,r))).at(-1))&&void 0!==r?r:null}))}function he(e,t){return h((n=>((0,c.isNil)(t)?n.responses:n.responses.slice(0,t)).filter((t=>t.type===e))))}function ge(e,t){return h((n=>{const r=((0,c.isNil)(t)?n.responses:n.responses.slice(0,t)).filter((t=>t.type===e&&t.contextType!==i.ContextType.Skipped)).at(-1);if(!r)return null;var o;return null!==(o=n.stepParams.at(r.index))&&void 0!==o?o:null}))}function be(e,t){return h((n=>{if(!e)return null;const r=((0,c.isNil)(t)?n.responses:n.responses.slice(0,t)).filter((t=>t.step_id===e)).at(-1);return r||null}))}const ve=(0,a.Mt)(((e,t)=>{var n;return null!==(n=e.turnVersionHistory[t])&&void 0!==n?n:0}));function xe(e){return h((t=>ve(t,e)))}function ye(e){return h((t=>(0,d.constructChatHistory)({responses:t.responses,config:t.config,stepParamsWithStage:t.stepParams,responseIndex:e})))}const we=e=>{const t=ye(e),n=t.find((e=>e.role===i.MessageRole.User)),r=t.find((e=>e.role===i.MessageRole.Assistant)),o=h((e=>e.config.turn.find((e=>[i.InteractionStepType.ProcessSupervision,i.InteractionStepType.ExperimentalToolUse].includes(e.type)))));return{isEnabled:null===o||void 0===o?void 0:o.params.limit_chat_history,promptRole:r?i.MessageRole.Assistant:i.MessageRole.User,chatHistory:r?[n]:[]}},ke=()=>ye().find((e=>e.role===i.MessageRole.System))},225729:function(e,t,n){n.d(t,{p:function(){return r}});const r=(0,n(827378).createContext)(null);r.Consumer},892328:function(e,t,n){n.d(t,{B:function(){return m}});var r=n(824246),o=n(690085),s=n(827378),a=n(922632),i=n(720227),l=n(601148),c=n(722030),d=n(667332);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}const m=({className:e,label:t,labelDescription:n,required:u,disabled:m,error:f,value:h,name:g,helperText:b,autoFocus:v,onFocus:x,onBlur:y,onChange:w,onKeyDown:k,editorOptions:j={fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,padding:{top:16,bottom:16},formatOnPaste:!0,formatOnType:!0,renderLineHighlight:"none"},editorProps:C={},tooltipContentClassName:S})=>{const{0:T,1:O}=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(T){const e=()=>{var e;null===(e=null===T||void 0===T?void 0:T.getAction("editor.action.formatDocument"))||void 0===e||e.run()};T.onDidChangeModelLanguageConfiguration(e),T.onDidLayoutChange(e),T.onDidFocusEditorWidget((()=>{null===x||void 0===x||x()})),T.onDidBlurEditorWidget((()=>{e(),null===y||void 0===y||y()})),T.onKeyDown((e=>{null===k||void 0===k||k(e)}))}}),[T,x,y,k]),(0,r.jsxs)("div",{className:(0,i.m)("scaleui flex flex-col z-20",e),children:[(0,r.jsx)(l.A,{required:u,error:f,disabled:m,labelDescription:n,tooltipContentClassName:S,children:t}),(0,r.jsx)(o.ZP,p({},C,{loading:(0,r.jsx)("div",{className:(0,i.m)("h-full w-full flex items-center justify-center",C.className),children:(0,r.jsx)(c.$,{size:"md",variant:"primary"})}),wrapperProps:{className:"shadow-sm overflow-hidden rounded-b-lg",name:g},options:j,value:h,onChange:w,onMount:(e,t)=>{O(e),t.languages.registerDocumentFormattingEditProvider("sql",{provideDocumentFormattingEdits:e=>[{range:e.getFullModelRange(),text:(0,a.WU)(e.getValue())}]}),t.languages.registerDocumentRangeFormattingEditProvider("sql",{provideDocumentRangeFormattingEdits:(e,t)=>[{range:t,text:(0,a.WU)(e.getValueInRange(t))}]}),v&&e.focus()}})),b?(0,r.jsx)(d.p,{error:f,className:"px-1 w-full whitespace-pre-line",children:b}):null]})}},483519:function(e,t,n){var r=n(824246),o=n(604375),s=n(916115),a=n(713222),i=n(60042),l=n.n(i),c=n(154184),d=n(720227);const u=(0,o.ZL)((()=>({scrollBarColor:{scrollbarColor:"rgba(255, 255, 255, 0.5) rgba(255, 255, 255, 0.1)",scrollbarWidth:"thin"}})));t.Z=function({className:e,outputValue:t,setOutputTabOpen:n,tab:o,setTab:i,fetchError:p,fullScreenEnabled:m,fullWidthEnabled:f}){const h=u();return(0,r.jsxs)("div",{className:(0,d.m)(l()("flex flex-col",{"pl-4":m&&!f,"pl-2 w-3/12":!m&&!f},e)),children:[(0,r.jsxs)("div",{className:l()("flex flex-row rounded-t-lg h-16 justify-between bg-[#2d2d30]",{"w-full":!m,"w-[23vw]":m}),children:[(0,r.jsx)(s.m,{className:"pt-2 pl-3 border-none",value:o,tabs:[{id:c.A.STDOUT,label:"Output"},{id:c.A.STDERR,label:"Errors"}],onChange:e=>i(e)}),(0,r.jsx)("div",{className:"pt-4 pr-2",children:(0,r.jsx)(a.J,{icon:"xmark",variant:"white",onClick:e=>{e.stopPropagation(),n(!1)},tooltipProps:{side:"top"},tooltip:"Hide Output/Errors"})})]}),(0,r.jsx)("div",{className:l()("flex flex-row rounded-b-lg bg-[#1e1e1e]",{"h-[80vh] w-[23vw] z-[10002]":m,"h-64 w-full":!m}),children:(0,r.jsx)("div",{className:l()("text-sm p-2 pl-3 overscroll-x-contain overflow-y-scroll font-mono w-full whitespace-pre-wrap",h.scrollBarColor,{"text-neutral-0":o===c.A.STDOUT,"text-danger-400":o===c.A.STDERR||p}),children:p?"Error executing code - this usually occurs due to execution timeout. Please try again.":t})})]})}},590987:function(e,t,n){n.d(t,{Z:function(){return Ee}});var r=n(824246),o=n(792739),s=n(827378),a=n(749449),i=n(720227),l=n(722030),c=n(713222);const d={'code[class*="language-"]':{color:"#FF0000",background:"none",fontFamily:"\"Fira Code\", Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",fontSize:"10px"}},u={'code[class*="language-"]':{color:"#f8f8f2",background:"none",fontFamily:"\"Fira Code\", Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",fontSize:"10px"},'pre[class*="language-"]':{color:"#f8f8f2",background:"none",fontFamily:"\"Fira Code\", Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",overflow:"auto",borderRadius:"0.3em"},':not(pre) > code[class*="language-"]':{background:"#2E3440",padding:".1em",borderRadius:".3em",whiteSpace:"normal"},':not(pre) > pre[class*="language-"]':{background:"#2E3440"},comment:{color:"#636f88"},prolog:{color:"#636f88"},doctype:{color:"#636f88"},cdata:{color:"#636f88"},punctuation:{color:"#81A1C1"},".namespace":{Opacity:".7"},property:{color:"#81A1C1"},tag:{color:"#81A1C1"},constant:{color:"#81A1C1"},symbol:{color:"#81A1C1"},deleted:{color:"#81A1C1"},number:{color:"#B48EAD"},boolean:{color:"#81A1C1"},selector:{color:"#A3BE8C"},"attr-name":{color:"#A3BE8C"},string:{color:"#A3BE8C"},char:{color:"#A3BE8C"},builtin:{color:"#A3BE8C"},inserted:{color:"#A3BE8C"},operator:{color:"#81A1C1"},entity:{color:"#81A1C1",cursor:"help"},url:{color:"#81A1C1"},".language-css .token.string":{color:"#81A1C1"},".style .token.string":{color:"#81A1C1"},variable:{color:"#81A1C1"},atrule:{color:"#88C0D0"},"attr-value":{color:"#88C0D0"},function:{color:"#88C0D0"},"class-name":{color:"#88C0D0"},keyword:{color:"#81A1C1"},regex:{color:"#EBCB8B"},important:{color:"#EBCB8B",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"}};var p=n(89916),m=n(154184),f=n(134069),h=n(636012),g=n.n(h);const b=({code:e})=>{const{0:t,1:n}=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(t){const e=setTimeout((()=>n(!1)),1e3);return()=>{clearTimeout(e)}}}),[t]),(0,r.jsx)("span",{onClick:e=>e.stopPropagation(),children:(0,r.jsx)("button",{type:"button",onClick:()=>{g()(e),n(!0)},className:(0,i.m)("group overflow-hidden py-1 text-xs font-medium backdrop-blur transition bg-neutral-700/30 hover:bg-neutral-700/40"),children:t?(0,r.jsx)(c.J,{icon:["fas","check"],className:"w-3 h-3 fill-neutral-300/50 stroke-success-500",variant:"white"}):(0,r.jsx)(c.J,{icon:["far","clipboard"],className:"w-3 h-3 fill-neutral-300/50 stroke-neutral-300",variant:"white"})})})};function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}const y=({tabs:e,value:t,onChange:n,className:s})=>(0,r.jsx)("div",{className:(0,i.m)("border-0 border-b border-solid scaleui border-neutral-200",s),children:(0,r.jsx)("nav",{className:"flex -mb-px space-x-4","aria-label":"Tabs",children:e.map((e=>{var s;const a=null!==(s=e.label)&&void 0!==s?s:e.id;return(0,r.jsx)("button",{type:"button",disabled:e.disabled,className:(0,i.m)("whitespace-nowrap py-2 px-1 border-0 border-solid border-b-2 font-medium text-xs text-neutral-0",e.id===t?"border-neutral-0":"border-transparent hover:border-primary-500"),"aria-current":e.id===t?"page":void 0,onClick:()=>n(e.id),children:(0,r.jsxs)("span",{className:"flex items-center",children:[e.icon&&(0,r.jsx)(o.G,{icon:e.icon,className:"mr-2"}),a,e.suffix&&(0,r.jsx)("span",{className:"ml-1",children:e.suffix})]})},e.id)}))})}),w=({width:e,height:t,color:n})=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});var k=function({outputValue:e,setOutputTabOpen:t,tab:n,setTab:a,fetchError:l}){const{0:c,1:p}=(0,s.useState)(!1),h=e.split(/\r\n|\r|\n/).length,g=e=>{e.stopPropagation(),p(!c)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:(0,i.m)("group bg-transparent relative px-0 py-0",c?"overflow-auto":"overflow-hidden"),children:[(0,r.jsxs)("div",{style:{fontFamily:"Inter, sans-serif"},className:"text-white text-xs font-medium px-3 flex items-center justify-between bg-neutral-800 rounded-t-md py-1.5",children:[(0,r.jsx)(y,{className:"border-none",value:n,tabs:[{id:m.A.STDOUT,label:"Output"},{id:m.A.STDERR,label:"Errors"}],onChange:e=>a(e)}),(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[h>5&&c&&(0,r.jsxs)("button",{onClick:e=>g(e),className:"border ml-1 rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Collapse",(0,r.jsx)(o.G,{icon:"chevron-up",className:"ml-1"})]}),(0,r.jsx)("div",{className:"pl-4",children:(0,r.jsx)(b,{code:e})}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"ml-1 rounded-md py-1.5 pl-2 pr-1 text-xs flex items-center justify-center text-neutral-0",children:(0,r.jsx)(w,{width:16,height:16,color:"#FFFFFF"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:(0,i.m)("p-3 bg-neutral-900",c?"max-h-[600px] overflow-auto rounded-b-md":"max-h-[97px] overflow-hidden",h<=5||c?"rounded-b-md":"rounded-none"),children:(0,r.jsx)(f.Z,{children:l?"Error executing code - this usually occurs due to execution timeout. Please try again.":e,style:n===m.A.STDERR?x({},u,d):u,PreTag:"div",CodeTag:"div",showLineNumbers:!1})}),h>5&&!c&&(0,r.jsx)("div",{className:"flex items-center justify-center py-2 text-white text-xs font-medium bg-neutral-900 rounded-b-md",style:{fontFamily:"Inter, sans-serif"},children:(0,r.jsxs)("button",{onClick:e=>g(e),className:"border ml-1 text-white rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Expand",(0,r.jsx)(o.G,{icon:"chevron-down",className:"ml-1"})]})})]})]})})},j=n(416534),C=n(916353),S=n(244443),T=n(776845),O=n(60042),N=n.n(O),E=n(892328),P=n(483519),M=n(236125),R=n(527467),I=n(298784),A=n.n(I);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}const B=(0,M.Ue)()((0,R.mW)(((e,t)=>({scratchpadCodeState:{},setScratchpadCodeState:(t,n)=>{e((e=>({scratchpadCodeState:L({},e.scratchpadCodeState,{[t]:A().merge(e.scratchpadCodeState[t],n)})})))},getScratchpadCodeState:e=>{const n=t().scratchpadCodeState[e];return n&&0!==Object.keys(n).length?n:null}}))));var _=n(159400);const $=({className:e,codePopupButtonClassName:t,codeBlocks:n,codeBlockIndex:o,language:s,handleSetEditorCode:a,handleOpen:l,open:d})=>{const u=n.reduce(((e,t)=>t.language===s?e+t.code+"\n":e),"");return(0,r.jsx)("div",{className:(0,i.m)("flex flex-col bg-[#242424] rounded-b-lg",e),children:(0,r.jsxs)("div",{className:"flex flex-col w-full h-full pl-1",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center pl-1 pt-1 h-16",children:[(0,r.jsxs)("div",{className:"flex flex-row items-center",children:[(0,r.jsx)(c.J,{icon:["fas","code"],size:"md",className:"fill-neutral-300/50 stroke-success-500",variant:"white"}),(0,r.jsx)(T.ZT.Subtitle4,{className:"text-neutral-0 pl-1 text-lg",children:"Code Snippets"})]}),(0,r.jsx)("div",{className:"pr-2",children:(0,r.jsx)(c.J,{icon:d?["fas","chevron-down"]:["fas","chevron-up"],size:"md",className:"fill-neutral-300/50 stroke-neutral-300",variant:"white",onClick:()=>l(!d)})})]}),(0,r.jsx)("section",{className:"ml-2",children:d&&(0,r.jsx)(Z,{className:"hover:bg-neutral-700 w-fit flex flex-row items-center",variant:"long",code:u,language:s,selected:!1,title:"Replace Current Code With All Code Snippets",icon:["fas","arrow-right"],onClick:()=>a(u)})})]}),(0,r.jsx)("section",{className:"ml-2 mt-4 h-full overflow-y-hidden",children:d&&(0,r.jsx)("div",{className:"flex flex-row overflow-x-auto pb-2",children:n.map(((e,n)=>(0,r.jsx)("div",{className:"w-32 h-20 pr-2 shrink-0",children:(0,r.jsx)(Z,{className:t,code:e.code,language:e.language,selected:o===n,title:`Block ${(n+1).toString()}`,icon:["far","clipboard"],onClickTransitionIcon:["fas","check"],onClick:()=>{navigator.clipboard.writeText(e.code)}})},n)))})})]})})},Z=({className:e,code:t,language:n,selected:o,title:a,onClick:l,icon:d,onClickTransitionIcon:u,variant:p="block"})=>{const{0:m,1:f}=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(m){const e=setTimeout((()=>f(!1)),1e3);return()=>{clearTimeout(e)}}}),[m]),(0,r.jsx)(C.u,{target:(0,r.jsx)("div",{className:(0,i.m)("bg-[#2d2d30] h-full w-full align-middle hover:cursor-pointer rounded-md",e),children:(0,r.jsxs)("div",{className:"block"===p?"flex flex-col h-full w-full md:flex-wrap justify-between":"flex items-center",onClick:e=>{l&&l(e),f(!0)},children:[(0,r.jsxs)("div",{className:"flex flex-col items-baseline p-2",children:[(0,r.jsx)("span",{className:"text-neutral-0 text-xs font-medium",children:a}),o&&(0,r.jsx)("span",{className:"text-primary-300 text-[9px]",children:" Current "})]}),(0,r.jsx)("div",{className:(0,i.m)("flex flex-row justify-end pr-1","block"===p?"pb-1":""),children:m&&u?(0,r.jsx)(c.J,{icon:u,size:"sm",className:"fill-neutral-300/50 stroke-neutral-300",variant:"white"}):d&&(0,r.jsx)(c.J,{icon:d,size:"sm",className:"fill-neutral-300/50 stroke-success-500",variant:"white"})})]})}),side:"top",delayDuration:.1,text:(0,r.jsx)("div",{className:"whitespace-pre-wrap",children:(0,r.jsx)(_.U,{markdown:`~~~${n}\n${t}\n~~~`})})})};var z=n(135338),H=n(232337),F=n(729316),V=n(786980),W=n(243467);function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}function J(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const G=V.fC,q=s.forwardRef(((e,t)=>{var{className:n}=e,o=J(e,["className"]);return(0,r.jsx)(V.ck,K({ref:t,className:N()("-mt-8",n)},o))}));q.displayName="AccordionItem";const Y=s.forwardRef(((e,t)=>{var{className:n,hint:o,children:s}=e,a=J(e,["className","hint","children"]);return(0,r.jsx)(V.h4,{className:"flex",children:(0,r.jsxs)(V.xz,K({ref:t,className:N()("flex flex-1 items-center text-sm transition-all justify-between [&[data-state=open]>div>svg]:rotate-90",n)},a,{children:[(0,r.jsxs)("div",{className:"flex gap-2 font-bold text-neutral-0",children:[(0,r.jsx)(W.XCv,{className:"h-5 w-5 shrink-0 text-muted-foreground transition-transform duration-200"}),s]}),o&&(0,r.jsx)("div",{className:"text-muted-foreground",children:o})]}))})}));Y.displayName=V.xz.displayName;const X=s.forwardRef(((e,t)=>{var{className:n,children:o}=e,s=J(e,["className","children"]);return(0,r.jsx)(V.VY,K({ref:t,className:"overflow-hidden text-sm pl-10 pr-3 data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"},s,{children:(0,r.jsx)("div",{className:N()("pb-0 pt-0 text-neutral-0",n),children:o})}))}));X.displayName=V.VY.displayName;var Q,ee=n(322107),te=n(428907),ne=n(736166);!function(e){e.None="none",e.ExpandAll="expand-all",e.CollapseAll="collapse-all"}(Q||(Q={}));const{Provider:re,useContextStore:oe,useImperativeApi:se}=function(e){const t=s.createContext(void 0);return{Provider:({children:n})=>{const{0:o}=(0,s.useState)((()=>(0,ne.M)(e)));return(0,r.jsx)(t.Provider,{value:o,children:n})},useContextStore:function(e){const n=s.useContext(t);if(!n)throw new Error("useContextStore must be used within a Provider");return(0,M.oR)(n,e)},useImperativeApi:function(){const e=s.useContext(t);if(!e)throw new Error("useImperativeApi must be used within a Provider");return e}}}((e=>({globalValue:Q.None,onChangeGlobalValue:t=>{e((0,te.Uy)((e=>{e.globalValue=t})))}})));function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function le({className:e,children:t}){return(0,r.jsx)(re,{children:(0,r.jsx)(ce,{className:e,children:t})})}function ce({className:e,children:t}){const{globalValue:n,onChangeGlobalValue:a}=oe((e=>({globalValue:e.globalValue,onChangeGlobalValue:e.onChangeGlobalValue})));return(0,s.useEffect)((()=>{a(Q.ExpandAll)}),[a]),(0,r.jsxs)("div",{className:N()("relative group",e),children:[(0,r.jsxs)(j.zx,{className:"absolute top-2.5 right-3 h-6 group-hover:flex gap-2 bg-transparent hover:bg-secondary hidden",size:"sm",onClick:e=>{e.stopPropagation(),a(n===Q.CollapseAll?Q.ExpandAll:Q.CollapseAll)},children:[(0,r.jsx)(o.G,{icon:ee.iAX}),n===Q.CollapseAll?"Expand all":"Collapse all"]}),t]})}var de=(0,s.forwardRef)(((e,t)=>{var n,{children:o,defaultValue:a}=e,i=ie(e,["children","defaultValue"]);const{0:l,1:c}=(0,s.useState)(null!==(n=a)&&void 0!==n?n:[]),{globalValue:d,onChangeGlobalValue:u}=oe((e=>({globalValue:e.globalValue,onChangeGlobalValue:e.onChangeGlobalValue}))),p=s.Children.count(o);return(0,s.useEffect)((()=>{c((e=>{switch(d){case Q.ExpandAll:return[...Array(p).keys()].map(((e,t)=>`item-${t}`));case Q.CollapseAll:return[];default:return e}}))}),[d,p]),(0,r.jsx)(G,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}({ref:t},i,{type:"multiple",value:l,onValueChange:e=>{d!==Q.None&&u(Q.None),c(e)},children:o}))}));de.displayName="NestedAccordion";function ue(e){return A().isNull(e)||A().isBoolean(e)||A().isNumber(e)||A().isString(e)}function pe(){return(0,r.jsx)("span",{className:"text-[#ce9178] overflow-auto whitespace-pre-line break-words items-baseline",children:"Null"})}function me({value:e}){return(0,r.jsx)("span",{className:"capitalize text-[#ce9178] overflow-auto whitespace-pre-line break-words items-baseline",children:e.toString()})}function fe({value:e}){return(0,r.jsx)("span",{className:"text-[#b5cea8] overflow-auto whitespace-pre-line break-words items-baseline",children:e})}function he({value:e}){return e.startsWith("http")||e.startsWith("https")?(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",style:{color:"#179fff"},className:"!text-[#179fff] overflow-auto whitespace-pre-line break-words items-baseline",children:e}):(0,r.jsx)("span",{className:"text-[#ce9178] overflow-auto whitespace-pre-line break-words items-baseline",children:e})}function ge({value:e,depth:t=0}){return e.every(ue)?(0,r.jsx)("span",{className:"divide-x",children:e.map(((e,t)=>(0,r.jsx)("span",{className:"px-2 last:pr-0 first:pl-0",children:ve(e)},t)))}):(0,r.jsx)(de,{className:"w-full border-b-0",defaultValue:[t<=3?"item-0":""],children:e.map(((e,n)=>(0,r.jsxs)(q,{value:`item-${n}`,className:"w-full border-b-0 pb-0",children:[(0,r.jsx)(Y,{className:"py-2 mb-1 pl-1 hover:bg-neutral-500 rounded",children:`Item ${n+1}`}),(0,r.jsx)(X,{className:"py-2 mb-3 -ml-7 pl-3 border-l border-neutral-500 overflow-scroll",children:ve(e,t+1)})]},n)))})}function be({value:e,depth:t=1}){return(0,r.jsx)("div",{children:Object.entries(e).map((([e,n],o)=>ue(n)?(0,r.jsxs)("div",{style:{width:"120vw"},className:"pb-3 mb-1 pl-2 flex items-baseline",children:[(0,r.jsx)("div",{className:"whitespace-pre",children:`${A().startCase(e)}:`}),"\xa0",(0,r.jsx)(C.u,{asChild:!0,target:(0,r.jsx)("div",{className:"overflow-scroll",children:ve(n)}),text:(0,r.jsx)("div",{className:"break-words max-w-md",children:n})})]},o):(0,r.jsx)(de,{className:"w-full border-b-0",defaultValue:[t<=3?"item-0":""],children:(0,r.jsxs)(q,{value:"item-0",className:"w-full border-b-0 pb-0",children:[(0,r.jsx)(Y,{className:"py-2 mb-1 pl-1 hover:bg-neutral-500 relative rounded text-neutral-0",children:`${A().startCase(e)}:`}),(0,r.jsx)(X,{className:"py-2 mb-3 -ml-7 pl-3 border-l border-neutral-500 overflow-scroll",children:ve(n,t+1)})]})},o)))})}function ve(e,t=1){return A().isNull(e)?(0,r.jsx)(pe,{}):A().isBoolean(e)?(0,r.jsx)(me,{value:e}):A().isNumber(e)?(0,r.jsx)(fe,{value:e}):A().isString(e)?(0,r.jsx)(he,{value:e}):A().isArray(e)?(0,r.jsx)(ge,{value:e,depth:t}):A().isObject(e)?(0,r.jsx)(be,{value:e,depth:t}):null}const xe=s.memo((({className:e,content:t,disableYScroll:n})=>{const{0:o,1:a}=(0,s.useMemo)((()=>{try{return[JSON.parse(t),!0]}catch(e){return[t,!1]}}),[t]);return a?(0,r.jsx)(le,{className:N()("px-3 pt-7 pb-2.5",!n&&"overflow-y-auto",e),children:ve(o)}):null}));xe.displayName="JsonRenderer";const ye={json:xe};var we=n(542280);const ke=(0,s.memo)((({rawCode:e,originalLanguage:t,setOpen:n,codeBlocksInMarkdownText:a,codeBlockIndex:d,customCodeEnvironments:u})=>{const m=Ce(),{setScratchpadCodeState:f,getScratchpadCodeState:h}=B(),g=(0,s.useMemo)((()=>H.createHash("sha256").update(`${e}-${t}-codingScratchpad}`).digest("hex")),[e,t]);var b;const v=null!==(b=null===u||void 0===u?void 0:u.find((e=>e.language===t)))&&void 0!==b?b:void 0;var x;const y={code:e,language:null!==(x=null===v||void 0===v?void 0:v.language)&&void 0!==x?x:t,selectedCustomCodeEnvironment:v};var w;(0,s.useEffect)((()=>{h(g)||f(g,y)}),[g,h,f]);const{code:k,language:O,selectedCustomCodeEnvironment:M}=null!==(w=h(g))&&void 0!==w?w:y,R=!!p.LANGUAGE_OPTIONS.find((({id:e})=>e===O))||!!M,{0:I,1:A}=(0,s.useState)(a.length>1),{0:D,1:L}=(0,s.useState)(!0),{outputTabOpen:_,outputValue:Z,tab:V,isFetching:W,fetchError:U,loadingTaskIdForLogging:K,handleExecuteCode:J,setOutputTabOpen:G,setTab:q}=(0,z.Z)({storeKey:g,code:k,language:O,customCodeEnvironment:M}),Y=(0,s.useMemo)((()=>{if("json"!==O)return{formattingSuccessful:!1,formattedContent:k};const e=je[O.toLowerCase()];return e?e(k):{formattingSuccessful:!1,formattedContent:k}}),[k,O]),X=ye[O],{formattingSuccessful:Q,formattedContent:ee}=Y,te=!!X&&!!Q,{0:ne,1:re}=(0,s.useState)(te),oe=e=>{f(g,{code:e})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-utility-black/50 flex flex-col justify-center items-center z-[2] text-danger",onClick:e=>{e.stopPropagation(),e.preventDefault(),(e=>{e.target===e.currentTarget&&n(!1)})(e)},children:(0,r.jsxs)("div",{className:"flex flex-row w-[80vw] h-[80vh]",children:[(0,r.jsxs)("div",{className:(0,i.m)("flex flex-col z-[2]",!ne&&_?"w-9/12":"w-full"),children:[(0,r.jsxs)("div",{className:"flex flex-row rounded-t-lg h-16 justify-between bg-[#2d2d30] w-full z-50",children:[(0,r.jsx)(F.y,{selectMenuClassName:"pl-1 pt-2",selectMenuButtonClassName:"py-0 h-12 w-40 [&>p]:m-0",selectMenuOptionClassName:"list-none w-40 py-0.5 px-0",customCodeEnvironments:u,selectedLanguage:O,selectedCustomCodeEnvironment:M,handleLanguageChange:e=>{f(g,{language:e})},setSelectedCustomCodeEnvironment:e=>f(g,{selectedCustomCodeEnvironment:e})}),R&&(0,r.jsx)("div",{className:"pt-3 pr-4",children:(0,r.jsxs)(j.zx,{className:N()("h-10",{"w-[102px]":W,"w-24":!W}),onClick:()=>J(),size:"sm",variant:"primary",disabled:W||K,children:[W?(0,r.jsx)(l.$,{className:"",size:"xs",variant:"primary"}):(0,r.jsx)(o.G,{icon:"play"}),(0,r.jsx)("span",{className:"pl-2",children:W?"Executing":"Run Code"})]})}),(0,r.jsxs)("div",{className:"flex flex-row pr-2 pt-4",children:[te&&(0,r.jsx)(C.u,{asChild:!0,side:"top",target:(0,r.jsx)("div",{children:(0,r.jsx)(S.r,{className:"pr-3 pb-4",checked:ne,onCheckedChange:e=>re(e)})}),text:(0,r.jsx)("div",{className:"whitespace-pre-wrap bg-neutral-1000",children:ne?"Show Standard View":"Show Pretty View"}),delayDuration:.1}),(0,r.jsx)(c.J,{icon:"copy",variant:"white",onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(k)},tooltipProps:{side:"top"},tooltip:"Copy Code"}),!ne&&!_&&(0,r.jsx)(c.J,{icon:_?"arrow-to-left":"arrow-to-right",variant:"white",onClick:e=>{e.stopPropagation(),G(!_)},tooltipProps:{side:"top"},tooltip:"Open Output/Errors Tab"}),(0,r.jsx)(c.J,{icon:"xmark",variant:"white",onClick:e=>{e.stopPropagation(),n(!1)},tooltipProps:{side:"top"},tooltip:"Close Scratchpad"})]})]}),D&&!ne&&(0,r.jsxs)("div",{className:"flex flex-row h-[4vh] bg-[#242424] px-2 justify-between items-center bg-neutral-9",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-center items-center gap-1",children:[(0,r.jsx)("div",{children:(0,r.jsx)(c.J,{icon:"exclamation-circle",variant:"white",size:"sm"})}),(0,r.jsx)(T.ZT.Paragraph1,{className:"text-neutral-0 text-xs",children:"Changes made in this scratchpad won't be saved in your response."})]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.J,{icon:"xmark",variant:"white",onClick:e=>{e.stopPropagation(),L(!1)},size:"sm"})})]}),ne&&te?(0,r.jsx)(X,{className:(0,i.m)("bg-neutral-900 overflow-auto text-neutral-0 flex-1 w-full whitespace-pre-line rounded-b-md",m.scrollbarStyles),content:ee,disableYScroll:!0}):(0,r.jsx)("div",{className:"flex flex-col flex-1 min-h-0",children:(0,r.jsx)(E.B,{className:"flex flex-row bg-[#2d2d30] flex-1 min-h-0",value:k,onKeyDown:e=>{"Space"===e.code&&e.stopPropagation()},onChange:oe,editorProps:{language:O,theme:"vs-dark"},editorOptions:{fontSize:14,minimap:{enabled:!0},scrollBeyondLastLine:!1,padding:{top:19,bottom:8},formatOnPaste:!0,formatOnType:!0,renderLineHighlight:"none",readOnly:!1,hover:{enabled:!1},inlineSuggest:{enabled:!0},readOnlyMessage:{value:"Editor is in read-only mode"}}})}),!ne&&(0,r.jsx)($,{className:"z-[50]",codeBlocks:a,codeBlockIndex:d,language:O,handleSetEditorCode:oe,handleOpen:e=>A(e),open:I})]}),!ne&&_&&(0,r.jsx)(P.Z,{className:"flex-1 min-w-0 h-full w-3/12",outputValue:null!==Z&&void 0!==Z?Z:"",setOutputTabOpen:G,tab:V,setTab:q,fetchError:U,fullScreenEnabled:!0,fullWidthEnabled:!1})]})})})})),je={json:function(e){try{const t=JSON.parse(e);return{formattingSuccessful:!0,formattedContent:JSON.stringify(t,null,2)}}catch(t){return{formattingSuccessful:!1,formattedContent:e}}}};const Ce=(0,we.ZL)((()=>({scrollbarStyles:{"& div":{scrollbarColor:"rgba(248, 248, 242, 0.5) rgba(0, 0, 0, 0)",scrollbarWidth:"thin"}}})));var Se=n(534522),Te=n(283888);const Oe=e=>p.fullLanguageMap[e]||e.toUpperCase(),Ne=(0,s.memo)((({code:e,languageMatch:t,languageOverride:n,codeBlocksInMarkdownText:d,codeBlockIndex:m,autoRunDependenciesComplete:f,loading:h,defaultExpanded:g=!0})=>{var v;const x=Pe(),{0:y,1:w}=(0,s.useState)(g);var j;const C=null!==(j=null!==n&&void 0!==n?n:null===t||void 0===t?void 0:t[1].toLowerCase())&&void 0!==j?j:"",S=(0,s.useContext)(Se.p),T=null===S||void 0===S||null===(v=S.codingConfig)||void 0===v?void 0:v.customCodeEnvironments,O=1===(null===T||void 0===T?void 0:T.length)||(!T||0===T.length)&&!!p.LANGUAGE_OPTIONS.find((({id:e})=>e===C)),E=(0,s.useMemo)((()=>h?"":H.createHash("sha256").update(`${e}-${C}-executableCodeBlock`).digest("hex")),[e,C,h]),{getScratchpadOpenState:P,setScratchpadOpenState:M}=(0,Te.U)(),[R,I]=[P(E),e=>M(E,e)],{outputTabOpen:A,outputValue:D,tab:L,isFetching:B,fetchError:_,loadingTaskIdForLogging:$,handleExecuteCode:Z,setOutputTabOpen:F,setTab:V}=(0,z.Z)({storeKey:E,code:e,language:C,customCodeEnvironment:null===T||void 0===T?void 0:T[0]}),W=e=>{e.stopPropagation(),w(!y)};(0,s.useEffect)((()=>{var e,t,n;const r=null!==(n=null===(e=S.codingConfig)||void 0===e?void 0:e.autoRunExecutableCodeBlocks)&&void 0!==n?n:null===(t=S.generalMarkdownConfig)||void 0===t?void 0:t.autoRunExecutableCodeBlocks;f&&O&&r&&Z()}),[f,S.codingConfig,S.generalMarkdownConfig,O]);const U=e.split(/\r\n|\r|\n/).length;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:(0,i.m)("group bg-transparent relative px-0 py-0 scale-theme",y?"overflow-auto":"overflow-hidden"),children:[(0,r.jsxs)("div",{style:{fontFamily:"Inter, sans-serif"},className:"text-white text-xs font-medium px-3 flex items-center justify-between bg-neutral-800 rounded-t-md py-1.5",children:[(0,r.jsx)("span",{className:"text-neutral-0",children:Oe(C)}),(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[!h&&O&&(0,r.jsx)("div",{className:"pr-1",children:B?(0,r.jsx)(l.$,{className:"pr-2",size:"xs",variant:"primary"}):(0,r.jsx)(c.J,{icon:["far","play"],className:"hover:bg-neutral-700/40",variant:"white",onClick:e=>{e.stopPropagation(),Z()},disabled:B||$,tooltip:"Run Code",tooltipProps:{side:"top",delayDuration:100}})}),!h&&T&&(null===T||void 0===T?void 0:T.length)>1&&(0,r.jsx)(c.J,{icon:["far","exclamation-circle"],className:"hover:bg-neutral-800",variant:"white",tooltip:"Please use the coding scratchpad (click on the pencil icon to the right) to execute and test your code.",tooltipProps:{side:"top",delayDuration:100}}),!h&&(0,r.jsx)("div",{className:"pr-1",children:(0,r.jsx)(c.J,{icon:["far","pen"],className:"hover:bg-neutral-700/40",variant:"white",onClick:e=>{e.stopPropagation(),e.preventDefault(),I(!0)},tooltip:"Scratchpad (changes made are not saved)",tooltipProps:{side:"top",delayDuration:100}})}),(0,r.jsx)("div",{className:"pl-2 pr-3 pt-1",children:(0,r.jsx)(b,{code:e})}),U>15&&y&&(0,r.jsxs)("button",{onClick:e=>W(e),className:"border ml-1 rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Collapse",(0,r.jsx)(o.G,{icon:"chevron-up",className:"ml-1"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:N()("p-3 bg-neutral-900",y?"max-h-[900px] overflow-auto rounded-b-md":"max-h-[290px] overflow-hidden",x.codeblockStyle),children:(0,r.jsx)(a.Z,{children:e,style:u,language:C,PreTag:"div",CodeTag:"div",showLineNumbers:!0})}),U>15&&!y&&(0,r.jsx)("div",{className:"flex items-center justify-center py-2 text-white text-xs font-medium bg-neutral-900 rounded-b-md",style:{fontFamily:"Inter, sans-serif"},children:(0,r.jsxs)("button",{onClick:e=>W(e),className:"border ml-1 text-white rounded-md py-1.5 px-2 text-xs flex items-center justify-center bg-neutral-600 border-neutral-500 text-neutral-0",children:["Expand",(0,r.jsx)(o.G,{icon:"chevron-down",className:"ml-1"})]})})]}),"text"!==C&&A&&(0,r.jsx)("div",{className:"border-none pt-4",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(k,{className:"w-full h-40 p-0 whitespace-pre-line",outputValue:null!==D&&void 0!==D?D:"",setOutputTabOpen:F,tab:L,setTab:V,fetchError:_,fullScreenEnabled:!1,fullWidthEnabled:!0})}),R&&(0,r.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-utility-black/50 flex flex-col justify-center items-center z-[100]",children:(0,r.jsx)(ke,{rawCode:e,originalLanguage:C,codeBlocksInMarkdownText:d,setOpen:I,codeBlockIndex:m,customCodeEnvironments:T})})]})})}));Ne.displayName="ExecutableCodeBlock";var Ee=Ne;const Pe=(0,we.ZL)((()=>({codeblockStyle:{'& div[class*="language-"]':{color:"rgb(248, 248, 242)",background:"none",fontFamily:'"Fira Code", Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace',textAlign:"left",whiteSpace:"pre-wrap !important",wordSpacing:"normal",wordBreak:"normal",overflowWrap:"normal",lineHeight:"1.5",tabSize:4,hyphens:"none",fontSize:"10px",width:"800px !important"},"& div":{scrollbarColor:"rgba(248, 248, 242, 0.5) rgba(0, 0, 0, 0)",scrollbarWidth:"thin"}}})))},729316:function(e,t,n){n.d(t,{y:function(){return l}});var r=n(824246),o=n(412937),s=n(720227),a=n(89916),i=n(827378);const l=({className:e,selectMenuClassName:t,selectMenuButtonClassName:n,selectMenuOptionClassName:l,customCodeEnvironments:c,selectedLanguage:d,selectedCustomCodeEnvironment:u,useFullLanguageOptions:p,disabled:m,handleLanguageChange:f,setSelectedCustomCodeEnvironment:h,onBlur:g})=>{const b=(0,i.useMemo)((()=>Object.keys(a.fullLanguageMap).sort().map((e=>({id:e,name:a.fullLanguageMap[e]})))),[]),v=(0,i.useMemo)((()=>{if(c&&c.length>0){const e=c.map((e=>({id:e.name,name:"*"+e.name}))),t=p?b:[...a.LANGUAGE_OPTIONS,...a.SUPPORTED_PRETTY_PRINT_FORMATS],n=new Set(e.map((e=>e.id)));return[...e,...t.filter((e=>!n.has(e.id)))]}return p?b:[...a.LANGUAGE_OPTIONS,...a.SUPPORTED_PRETTY_PRINT_FORMATS]}),[c,p,b]);var x;return(0,r.jsx)("div",{className:(0,s.m)("flex flex-row z-[3] transform scale-[0.85]",e),children:(0,r.jsx)(o.S,{placeholder:"Select Environment",className:t,menuDirection:"bottom",selectedOptionId:null!==(x=null===u||void 0===u?void 0:u.name)&&void 0!==x?x:d,setSelected:e=>{const t=null===c||void 0===c?void 0:c.find((t=>t.name===e));t?(f(t.language),h&&h(t)):(f(e),h&&h(null))},options:v,floatStrategy:"fixed",buttonClassName:n,optionClassName:l,onBlur:g,disabled:m})})}},787529:function(e,t,n){n.d(t,{l0:function(){return i},c$:function(){return l},LQ:function(){return c}});var r=n(775143),o=n(922017);function s(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=108e5,l=function(){var e,t=(e=function*(e,t,n,s,i){let l,c;try{l=yield(0,r.fetchApi)("/genai/executeSubmission",{body:{sourceCode:e,language:t,customEnvConfig:i?{projectId:i.sphereEngineProjectId,scenarioName:i.scenario,entryPoint:i.entryPoint,customEnvName:i.name,useCustomFiles:!!i.customFiles}:void 0,assignmentId:s},maxRetries:3,method:"POST",parseAndHandle:!0,redirectOnUnauthorized:!0}),c=null===l||void 0===l?void 0:l.success}catch(d){throw c=!1,d}finally{n&&(yield(0,o.Kz)(o.ju.SphereSubmissionEvent,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},n,{successfulExecution:c})))}return l},function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,l,"next",e)}function l(e){s(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(e,n,r,o,s){return t.apply(this,arguments)}}(),c=e=>{const t=[],n=/```(\w*)\s*(?:\r?\n)((?:.|[\r\n])*?)(?:\r?\n)```/g;let r;for(;null!==(r=n.exec(e));){const[,e,n]=r;t.push({language:e,code:n})}return t}},135338:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(827378),o=n(456552),s=n(787529),a=n(154184),i=n(298784),l=n.n(i),c=n(236125),d=n(527467);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}const m=(0,c.Ue)()((0,d.mW)(((e,t)=>({codeExecutionState:{},setCodeExecutionState:(t,n)=>{e((e=>({codeExecutionState:p({},e.codeExecutionState,{[t]:l().merge(e.codeExecutionState[t],n)})})))},getCodeExecutionState:e=>{const n=t().codeExecutionState[e];return n&&0!==Object.keys(n).length?n:{outputTabOpen:!1,tab:a.A.STDOUT}}}))));var f=n(358720),h=n(534522),g=n(885894),b=n(257881);function v(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){v(s,r,o,a,i,"next",e)}function i(e){v(s,r,o,a,i,"throw",e)}a(void 0)}))}}var y=({storeKey:e,code:t,language:n,customCodeEnvironment:i,onExecutionComplete:c})=>{const{0:d,1:u}=(0,r.useState)(null),{0:p,1:v}=(0,r.useState)(!1),{setCodeExecutionState:y,getCodeExecutionState:w}=m();var k;const[j,C]=[null!==(k=w(e).outputTabOpen)&&void 0!==k&&k,t=>y(e,{outputTabOpen:t})];var S;const[T,O]=[null!==(S=w(e).tab)&&void 0!==S?S:a.A.STDOUT,t=>y(e,{tab:t})],N=(0,r.useContext)(h.p),E=(0,f.xg)(),P=(0,f.t0)((e=>e.reviewLevel)),{isFetching:M,data:R}=(0,o.useQuery)(["assignmentDetails",N.assignmentId],x((function*(){var e;return yield b.Z.genai.getAssignmentDetails({assignmentId:null!==(e=N.assignmentId)&&void 0!==e?e:""})})),{enabled:!!N.assignmentId,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,retry:!1,staleTime:s.l0});var I;const A={taskId:null!==(I=N.taskId)&&void 0!==I?I:null===R||void 0===R?void 0:R.taskId,projectId:N.projectId,assignmentId:N.assignmentId,workerId:N.workerId,stepId:null===E||void 0===E?void 0:E.id,stepType:null===E||void 0===E?void 0:E.type,reviewLevel:P,timestamp:new Date,submissionType:g.U.ExecutableCodeBlock},{isFetching:D,data:L,error:B,refetch:_}=(0,o.useQuery)([e],x((function*(){var e,r;return yield(0,s.c$)(t,n,A,null!==(r=null!==(e=N.taskId)&&void 0!==e?e:N.assignmentId)&&void 0!==r?r:null===R||void 0===R?void 0:R.taskId,i)})),{enabled:!1,onSettled:e=>{$(!0,e),c&&c(e)}});(0,r.useEffect)((()=>{var e;L&&!p&&(O(l().isNil(null===L||void 0===L?void 0:L.stderr)&&l().isNil(null===L||void 0===L?void 0:L.stdout)?a.A.STDOUT:(null===L||void 0===L?void 0:L.stderr)?a.A.STDERR:a.A.STDOUT),u(l().isNil(null===L||void 0===L?void 0:L.stderr)&&l().isNil(null===L||void 0===L?void 0:L.stdout)?"":null!==(e=null===L||void 0===L?void 0:L.stderr)&&void 0!==e?e:null===L||void 0===L?void 0:L.stdout),v(!0))}),[L]);const $=(e,t)=>{if(l().isNil(null===t||void 0===t?void 0:t.stderr)&&l().isNil(null===t||void 0===t?void 0:t.stdout))return O(a.A.STDOUT),u(""),void(e&&C(!0));l().isNil(null===t||void 0===t?void 0:t.stderr)?l().isNil(null===t||void 0===t?void 0:t.stdout)||(O(a.A.STDOUT),u(t.stdout),e&&C(!0)):(O(a.A.STDERR),u(t.stderr),e&&C(!0))};return{outputTabOpen:j,outputValue:d,tab:T,setOutputTabOpen:C,setTab:e=>{var t;if(e===a.A.STDOUT)O(a.A.STDOUT),u(null!==(t=null===L||void 0===L?void 0:L.stdout)&&void 0!==t?t:null);else if(e===a.A.STDERR){var n;O(a.A.STDERR),u(null!==(n=null===L||void 0===L?void 0:L.stderr)&&void 0!==n?n:null)}},setOutputValue:u,isFetching:D,submissionResponse:L,fetchError:B,handleExecuteCode:_,loadingTaskIdForLogging:M}}},154184:function(e,t,n){var r;n.d(t,{A:function(){return r}}),function(e){e.STDOUT="stdout",e.STDERR="stderr"}(r||(r={}))},449959:function(e,t,n){n.d(t,{uV:function(){return E},L8:function(){return P}});var r=n(824246),o=n(112051),s=n(722030),a=n(171810),i=n(885701),l=n(720227),c=n(787529),d=n(590987),u=n(298784),p=n.n(u),m=n(827378),f=n(865813),h=n(966726),g=n(843077),b=n(391089),v=n(882201),x=n(818454),y=n(554211),w=n(534522),k=n(330201),j=n(344660);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const O=e=>{const t=(0,m.useRef)(null),n=(0,m.useContext)(w.p),{0:o}=(0,m.useState)(e.markdown),a=(0,j.U)(),{data:i,isLoading:l}=(0,y._z)("chat-preview-migration",{projectId:n.projectId},!1,!0,{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchIntervalInBackground:!1,retry:!1});return l?(0,r.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,r.jsx)(s.$,{size:"md"})}):i?(0,r.jsxs)(k.u3,{className:"min-h-fit",initialContent:o,enableMath:e.enableMath,defaultTokens:a,children:[(0,r.jsxs)(k.Nf,{ref:t,className:"border-none",children:[(0,r.jsx)(k.Tw,{}),(0,r.jsx)(k.MB,{className:e.className,content:e.markdown})]}),(0,r.jsx)(k.WT,{anchorRef:t,enabled:n.enableInlineCopilot})]}):(0,r.jsx)(N,S({},e))},N=({markdown:e,className:t,autoRunDependenciesComplete:n,enableMath:s,enableSingleDollarTextMath:u,enableHtml:k,enableSoftBreaks:j,enableExecutableCodeBlocks:C,disableRehypeSanitize:O=!0,loading:N=!1,defaultExpandCodeBlocks:P=!0})=>{const M=(0,m.useContext)(w.p),R=(0,m.useMemo)((()=>p().compact([k?h.Z:null,k&&!O?g.Z:null,s?f.Z:null])),[k,s,O]),I=(0,m.useMemo)((()=>{const e=[v.Z];return s&&e.push([x.Z,{singleDollarTextMath:!!u}]),j&&e.push(b.Z),e}),[s,u,j]),A=(0,y.ZP)("markdown-replace-with-double-dollar-sign",{projectId:M.projectId},!1);s&&(A&&(e=E(e)),e=(0,a.h)(e));const D=(0,c.LQ)(e);return(0,r.jsxs)("div",{children:[(0,r.jsx)("style",{children:"\n  li pre {\n    padding: 0 !important;\n    border-radius: 0.5rem !important;\n  }\n"}),(0,r.jsx)(o.D,{remarkPlugins:I,rehypePlugins:R,children:e,className:(0,l.m)("prose prose-neutral prose-sm max-w-none break-words [&>pre]:p-0 [&>pre]:rounded-lg",t,s?"text-neutral-700":""),components:{table:e=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsx)("table",S({},e))}),th:e=>(0,r.jsx)("th",S({className:"text-neutral-700"},e)),td:e=>(0,r.jsx)("td",S({className:"text-neutral-600"},e)),p:e=>(0,r.jsx)("p",S({className:"text-neutral-700"},e)),h1:e=>(0,r.jsx)("h1",S({className:"text-neutral-700"},e)),h2:e=>(0,r.jsx)("h2",S({className:"text-neutral-700"},e)),h3:e=>(0,r.jsx)("h3",S({className:"text-neutral-700"},e)),h4:e=>(0,r.jsx)("h4",S({className:"text-neutral-700"},e)),h5:e=>(0,r.jsx)("h5",S({className:"text-neutral-700"},e)),h6:e=>(0,r.jsx)("h6",S({className:"text-neutral-700"},e)),ul:e=>(0,r.jsx)("ul",S({className:"text-neutral-700"},e)),ol:e=>(0,r.jsx)("ol",S({className:"text-neutral-700"},e)),li:e=>(0,r.jsx)("li",S({className:"text-neutral-700"},e)),strong:e=>(0,r.jsx)("strong",S({className:"text-neutral-700"},e)),a:e=>(0,r.jsx)("a",S({target:"_blank",rel:"noopener noreferrer"},e,{className:(0,l.m)("text-neutral-700",e.className)})),code(e){const{children:t,className:o="",node:s,inline:a}=e,c=T(e,["children","className","node","inline"]),u=/language-(\w+)/.exec(o),p=D.findIndex((e=>e.code===String(t).replace(/\n$/,"")));return!a&&C?(0,r.jsx)(d.Z,{code:String(t).replace(/\n$/,""),languageMatch:u,codeBlocksInMarkdownText:D,codeBlockIndex:p,autoRunDependenciesComplete:n,loading:N,defaultExpanded:P}):a?(0,r.jsx)("code",S({},c,{className:(0,l.m)("text-neutral-700",o),children:t})):(0,r.jsx)(i.d,{code:String(t).replace(/\n$/,""),languageMatch:u,initCollapsed:!P})},pre:e=>C?(0,r.jsx)("div",{children:e.children}):(0,r.jsx)("pre",S({},e))}})]})},E=e=>{let t=e.replace(/\\\\\[((?:(?!\\\\\[).)*?)\\\\\]/gs,((e,t)=>`$$${t}$$`));return t=t.replace(/\\\\\(((?:(?!\\\\\().)*?)\\\\\)/gs,((e,t)=>`$$${t}$$`)),t},P=m.memo(O)},717809:function(e,t,n){n.d(t,{TG:function(){return y},ZP:function(){return k},RP:function(){return w}});var r=n(824246),o=n(855549),s=n(827378),a=n(60042),i=n.n(a),l=n(720227),c=n(63571),d=n(613911),u=n(722206),p=n(829714),m=n(792739),f=n(919374);function h(){const{editor:e}=(0,o.fi)(),{0:t,1:n}=(0,s.useState)(!1),{0:a,1:i}=(0,s.useState)(""),{0:l,1:c}=(0,s.useState)({left:0,right:0,top:0,bottom:0}),d=(0,s.useRef)(null);return(0,s.useEffect)((()=>{const t=(0,p.g)(e);if(!e||!t)return;const r=t.on("warning").subscribe((e=>{const{message:t,coords:r}=e.data;i(t),c(r),n(!0),d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{n(!1)}),3e3)}));return()=>{r.unsubscribe(),d.current&&clearTimeout(d.current)}}),[e]),(0,s.useEffect)((()=>{function r(){n(!1)}if(e){if(t)return e.on("transaction",r),()=>{e.off("transaction",r)};e.off("transaction",r)}}),[e,t]),e&&t?(0,r.jsxs)("div",{className:"flex items-center gap-2 font-medium transition-all bg-warning-50/90 text-warning-800 rounded-full px-2 py-1 fixed z-50 alert-tooltip -translate-y-[180%] -translate-x-[18px] pointer-events-none",style:{left:`${l.right}px`,top:`${l.top+window.scrollY}px`},children:[(0,r.jsx)(m.G,{icon:f.xHz}),a]}):null}var g=(0,s.memo)(h);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function x(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const y=(0,s.createContext)(void 0),w=()=>{const e=(0,s.useContext)(y);if(!e)throw new Error("useEditorRendererContext must be used within a EditorRendererProvider");return e};function k(e){var{className:t,content:n,placeholder:a,disabled:p,readOnly:m,disableCopy:f,disablePaste:h,onDisabledCopy:b,onDisabledPaste:y,onContentChange:k,onEditorBlur:j,onEditorFocus:C,onJsonChange:S,enableRTL:T=!1}=e,O=x(e,["className","content","placeholder","disabled","readOnly","disableCopy","disablePaste","onDisabledCopy","onDisabledPaste","onContentChange","onEditorBlur","onEditorFocus","onJsonChange","enableRTL"]);const[N,E]=(0,d.Z)(!1,300),P=(0,c.Z)(k),M=(0,c.Z)(S),R=(0,c.Z)(j),I=(0,c.Z)(C),{editor:A}=(0,o.fi)(),{editorRef:D}=w(),L=(0,s.useCallback)((({editor:e,transaction:t})=>{var n,r;const o=(0,u.Xm)(e);if(!o)return;const s=t.time,a=e.getJSON();null===(n=M.current)||void 0===n||n.call(M,a),null===(r=P.current)||void 0===r||r.call(P,o(),s)}),[P,M]);return(0,s.useEffect)((function(){null===A||void 0===A||A.setEditable(!p&&!m)}),[A,p,m]),(0,s.useEffect)((function(){A&&A.commands.setTextDirection("auto")}),[A]),(0,s.useEffect)((function(){if(!A)return;const e=({editor:e,transaction:t,event:n})=>{var r;E(!0);const o=(0,u.Xm)(e);o&&(null===(r=I.current)||void 0===r||r.call(I,{content:o(),timestamp:t.time,event:n}))},t=({editor:e,transaction:t,event:n})=>{var r;E(!1);const o=(0,u.Xm)(e);o&&(null===(r=R.current)||void 0===r||r.call(R,{content:o(),timestamp:t.time,event:n}))};return A.on("update",L),A.on("focus",e),A.on("blur",t),()=>{A.off("update",L),A.off("focus",e),A.off("blur",t)}}),[A,L,E,R,I]),(0,s.useEffect)((function(){if(!A)return;(0,u.BY)(A)(n,N)}),[A,n,N]),(0,s.useEffect)((function(){A&&A.commands.updatePlaceholder(null!==a&&void 0!==a?a:"")}),[A,a]),(0,s.useEffect)((function(){A&&(A.commands.updateDisableCopy(!!f),A.commands.updateDisablePaste(!!h))}),[A,f,h]),(0,s.useEffect)((function(){A&&(A.storage.noCopyPaste.onDisabledCopy=b,A.storage.noCopyPaste.onDisabledPaste=y)}),[A,b,y]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{}),(0,r.jsx)(o.kg,v({},O,{className:(0,l.m)(i()("relative w-full placeholder:text-neutral-100 bg-neutral-0 px-2 py-2 rounded-t-md rounded-b-md",{"cursor-not-allowed opacity-50":p,"text-right":T},t)),dir:T?"rtl":"ltr",editor:A,ref:D}))]})}},173130:function(e,t,n){var r=n(824246),o=n(827378),s=n(855549),a=n(60042),i=n.n(a),l=n(720227),c=n(643672);const d=(0,o.forwardRef)((function({children:e,className:t},n){const{editor:o}=(0,s.fi)(),a=(0,c.Z)();return o?(0,r.jsx)("div",{ref:n,className:(0,l.m)(i()("box-border relative leading-normal border rounded-md border-solid resize-none border-neutral-200 ring-primary-400",{"focus-within:ring-2":a},t)),children:e}):null}));t.Z=(0,o.memo)(d)},444506:function(e,t,n){n.d(t,{Z:function(){return J},C:function(){return Y}});var r=n(824246),o=n(855549),s=n(946969),a=n(60042),i=n.n(a),l=n(720227),c=n(980991),d=n(939904),u=n(686356),p=n(722206),m=n(616711),f=n(53355),h=n(583469),g=n(792739),b=n(690085),v=n(827378),x=n(916353),y=n(713222);const w=(0,v.memo)((({isRunningCodeExecution:e,codeExecutionResponse:t})=>{var n;const o=(null!==(n=null===t||void 0===t?void 0:t.stdout)&&void 0!==n?n:"").trim();var s;const a=(null!==(s=null===t||void 0===t?void 0:t.stderr)&&void 0!==s?s:"").trim();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 px-4 border-border border-t",children:[(0,r.jsx)("div",{className:"text-muted-contrast",children:"Output"}),(0,r.jsx)(x.u,{text:"Copy output to clipboard",target:(0,r.jsx)(y.J,{icon:"copy",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(null!==t&&void 0!==t?t:"",null,2))}})})]}),(0,r.jsx)("div",{className:"pb-2 px-4",children:e?(0,r.jsx)("div",{className:"text-muted-contrast",children:"Running code execution..."}):o||a?(0,r.jsxs)(r.Fragment,{children:[o?(0,r.jsx)("div",{className:"text-contrast",children:o}):null,a?(0,r.jsx)("div",{className:"text-error-text",children:a}):null]}):t?(0,r.jsx)("div",{className:"text-muted-contrast",children:"Ok"}):null})]})}));var k=n(780892),j=n(89916),C=n(787529);function S(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function T(e){return j.LANGUAGE_OPTIONS.some((({id:t})=>t===e))}function O({language:e,code:t,assignmentId:n="assignmentId",customCodeEnvironment:r}){return(0,k.Z)((o=function*(){if(!T(e))return{success:!1,stderr:"Language not supported",stdout:""};try{return yield(0,C.c$)(t,e,void 0,n,r)}catch(s){var o;return console.error(s),{success:!1,stderr:null!==(o=null===s||void 0===s?void 0:s.message)&&void 0!==o?o:"Error",stdout:""}}},function(){var e=this,t=arguments;return new Promise((function(n,r){var s=o.apply(e,t);function a(e){S(s,n,r,a,i,"next",e)}function i(e){S(s,n,r,a,i,"throw",e)}a(void 0)}))}),[e,t]);var o}var N=n(412937),E=n(613911),P=n(534522),M=n(128157),R=n(813110);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}const D={javascript:"js",js:"js",typescript:"ts",ts:"ts",python:"python",java:"java",shell:"sh",c:"c",cpp:"cpp",jsx:"jsx",json:"json",plaintext:"text",html:"html",swift:"swift"},L={javascript:"JavaScript",js:"JavaScript",typescript:"TypeScript",ts:"TypeScript",python:"Python",java:"Java",shell:"BashScript",c:"C",cpp:"C++",jsx:"JSX",json:"JSON",plaintext:"Plaintext",html:"HTML",swift:"Swift"},B=Object.entries(D).reduce(((e,[t,n])=>(e[n]=t,e)),{}),_=(0,v.memo)((({editor:e,node:t,getPos:n,updateAttributes:s})=>{var a,i,l,c,d,u,p;const{enableInlineCopilot:f}=(0,v.useContext)(P.p),y=B[null===t||void 0===t||null===(a=t.attrs)||void 0===a?void 0:a.language]||B.text,{0:k,1:j}=(0,v.useState)(!e.isEditable),[C,S]=(0,E.Z)("",200),I=(0,R.y)((e=>e.setSelection));var _;const $=null!==(_=null===(i=t)||void 0===i||null===(l=i.content)||void 0===l||null===(c=l.content)||void 0===c||null===(d=c[0])||void 0===d?void 0:d.text)&&void 0!==_?_:"",Z=null===(u=e.extensionStorage.noCopyPaste)||void 0===u?void 0:u.disableCopy,z=null===(p=e.extensionStorage.noCopyPaste)||void 0===p?void 0:p.disablePaste,{0:H,1:F}=(0,v.useState)(null),{0:V,1:W}=(0,v.useState)(400);(0,v.useEffect)((()=>{const t=({editor:e})=>{j(!e.isEditable)};return e.on("update",t),()=>{e.off("update",t)}}),[e]),(0,v.useEffect)((()=>{if(H){const e=()=>{W(H.getContentHeight())};H.onDidChangeCursorSelection((()=>{var e;const t=(null===(e=H.getModel())||void 0===e?void 0:e.getValueInRange(H.getSelection()||{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}))||"";S(t)})),H.onDidChangeModelLanguageConfiguration(e),H.onDidLayoutChange(e)}}),[H,S]),(0,v.useEffect)((()=>{C||e.commands.setCopilotOpen(!1)}),[e,C,I,n]);const U=(0,v.useCallback)((()=>{const t=(0,M.j)(e);if(!t)return;const r=t.eventBus.contextualize({source:"ExecutableCodeBlockNodeView"}),o=n();r.emit("selectionChange",{empty:""===C,text:C,from:Math.max(0,o),to:0}),e.commands.setCopilotOpen(!0)}),[e,C,n]),K=(0,v.useCallback)((()=>{const{state:t,dispatch:r}=e.view,{tr:o}=t,s=n();r(o.setSelection(m.Bs.near(o.doc.resolve(Math.max(0,s)))))}),[n,e]),J=(0,v.useCallback)((r=>{const{state:o,dispatch:s}=e.view,{tr:a}=o,i=o.schema.nodes.executableCodeBlock,l=n();let c;if(r!==t.content.textBetween(0,t.content.size,"")){if(r){const e=i.create(A({},t.attrs),o.schema.text(r));c=a.replaceWith(l,l+t.nodeSize,e)}else{const e=i.create(A({},t.attrs));c=a.replaceWith(l,l+t.nodeSize,e)}c.setSelection(m.Bs.near(a.doc.resolve(Math.max(0,l)))),s(c)}}),[n,e,t]),G=(0,v.useCallback)((()=>{if(!e.isEditable)return;const{state:r,dispatch:o}=e.view,{tr:s}=r,a=n();s.delete(a,a+t.nodeSize),e.commands.focus(a>0?a-1:a),o(s)}),[n,e.isEditable,e.commands,e.view,t.nodeSize]),q=(0,v.useCallback)((t=>{F(t),W(t.getContentHeight()),t.onKeyDown((r=>{const{state:o}=e.view,{doc:s}=o,a=n();if("Backspace"===r.code){const e=s.nodeAt(a);(null===e||void 0===e?void 0:e.textContent)||G()}if("ArrowDown"===r.code){const n=t.getPosition(),r=t.getModel();if(null===r||null===n)return;const o=r.getLineCount();n.lineNumber===o&&(e.commands.exitCode(),e.commands.focus())}if("ArrowUp"===r.code){const n=t.getPosition();1===(null===n||void 0===n?void 0:n.lineNumber)&&(e.commands.insertParagraphBefore(),e.commands.focus())}Z&&(r.ctrlKey||r.metaKey)&&33===r.keyCode&&r.preventDefault(),z&&(r.ctrlKey||r.metaKey)&&52===r.keyCode&&r.preventDefault()})),t.onDidFocusEditorWidget((()=>{K(),t.focus()}))}),[Z,z,n,G,K,e.commands,e.view]),[{loading:Y,value:X},Q]=O({language:y,code:$});return(0,r.jsxs)(o.T5,{as:"div",contentEditable:!1,dir:"auto",className:"react-monaco-code-block bg-neutral-800 not-wysiwyg text-neutral-0 border-neutral-700 border rounded overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center py-2 px-4 gap-5 border-neutral-700 border-b rounded-t",children:[(0,r.jsx)("div",{children:(0,r.jsx)(N.S,{isInPortal:!0,menuDirection:"bottom",optionsClassName:"scale-theme border border-neutral-400",disabled:k,selectedOptionId:y,options:Object.keys(D).map((e=>({id:e,name:L[e]}))),setSelected:e=>{s({language:D[e]})}})}),T(y)&&(0,r.jsx)(x.u,{text:Y?"Running code execution...":"Run code execution",target:(0,r.jsx)("div",{className:"flex items-center",onClick:Y?void 0:Q,children:(0,r.jsx)(g.G,{className:"text-muted-contrast cursor-pointer h-4 w-4",spin:Y,icon:Y?h.LM3:h.zc})})}),!Z&&(0,r.jsx)(x.u,{text:"Copy code to clipboard",target:(0,r.jsx)(g.G,{className:"text-muted-contrast cursor-pointer",icon:h.kZ_,onClick:e=>{e.preventDefault(),navigator.clipboard.writeText($)}})}),e.isEditable&&(0,r.jsx)(x.u,{text:"Delete code block",target:(0,r.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,r.jsx)(g.G,{onClick:G,icon:h.XAH,className:"text-muted-contrast cursor-pointer h-4 w-4"})})}),C&&f&&(0,r.jsx)(x.u,{text:"Copilot",target:(0,r.jsx)("div",{className:"flex items-center cursor-pointer",children:(0,r.jsx)(g.G,{onClick:U,icon:h.Y$T,className:"text-muted-contrast cursor-pointer h-4 w-4"})})})]}),(0,r.jsxs)("div",{className:"pr-4",children:[(0,r.jsx)(b.ZP,{theme:"vs-dark",height:V,wrapperProps:{className:"reset-all-css rounded-b"},value:$,language:y,options:{lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,minimap:{enabled:!1},padding:{top:10,bottom:10},lineDecorationsWidth:5,lineNumbersMinChars:4,unicodeHighlight:{ambiguousCharacters:!1},wordWrap:"on",overviewRulerBorder:!1,domReadOnly:k,readOnly:k},onMount:q,onChange:e=>{H&&(W(H.getContentHeight()),null===J||void 0===J||J(e))}}),(Y||X)&&(0,r.jsx)(w,{isRunningCodeExecution:Y,codeExecutionResponse:X})]})]})})),$="language-",Z=/^```([a-z]+)?[\s\n]$/,z=f.NB.create({name:"executableCodeBlock",content:"text*",group:"block",marks:"",code:!0,defining:!0,addStorage:()=>({markdown:{serialize(e,t){const n=t.textContent||"";e.write("```"+(t.attrs.language||"")),e.write("\n"),e.text(n,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:null!==(t=this.options.languageClassPrefix)&&void 0!==t?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}),addAttributes:()=>({language:{default:null,parseHTML:e=>{var t;const n=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith($))).map((e=>e.replace($,"")))[0];return n||null},rendered:!1}}),parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML:({node:e,HTMLAttributes:t})=>["pre",t,["code",{class:e.attrs.language?$+e.attrs.language:null},0]],addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e),insertParagraphBefore:()=>({tr:e,dispatch:t,state:{schema:n}})=>{const{selection:r}=e,{$from:o}=r,s=o.before(o.depth),a=n.nodes.paragraph.create(),i=e.insert(s,a),l=s+1;return i.setSelection(m.Bs.create(e.doc,l)),t&&t(i),!0}}},addKeyboardShortcuts:()=>({}),addInputRules(){return[(0,f.zK)({find:Z,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=null===o||void 0===o?void 0:o.mode;if(!n||!s)return!1;const{tr:a,schema:i}=e.state,l=i.text(n.replace(/\r\n?/g,"\n"));return a.replaceSelectionWith(this.type.create({language:s},l)),a.selection.$from.parent.type!==this.type&&a.setSelection(m.Bs.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),e.dispatch(a),!0}}})]},addNodeView:()=>(0,o.fW)(_)});var H=n(144849),F=n(717809),V=n(483563),W=n(938910),U=n(829714),K=n(172570);const J={boldToken:W.BoldToken.ASTERISK,italicToken:W.ItalicToken.ASTERISK,bulletListToken:W.BulletListToken.ASTERISK,mathToken:W.MathToken.DOLLARS};function G({defaultTokens:e=J}){const{editor:t}=(0,o.fi)();return(0,v.useEffect)((()=>{t&&(t.storage.markdownExtensions.boldToken=e.boldToken,t.storage.markdownExtensions.italicToken=e.italicToken,t.storage.markdownExtensions.bulletListToken=e.bulletListToken,t.storage.markdownExtensions.mathToken=e.mathToken)}),[t,e]),null}function q({className:e,children:t,extensions:n,initialContent:a,defaultTokens:m=J,enableMath:f=!1}){const h=(0,v.useRef)(null),g=(0,o.jE)({content:a,immediatelyRender:!1,extensions:[u.Z,H.Z.configure({enableMath:f,boldToken:m.boldToken,italicToken:m.italicToken,bulletListToken:m.bulletListToken,mathToken:m.mathToken}),p.ZP.configure({type:"markdown"}),s.V.configure({text:!1,bold:!1,italic:!1,bulletList:!1,listItem:!1,codeBlock:!1,paragraph:!1}),d.Z,c.Z,z,V.ZP,M.Z,U.Z,K.Z,...null!==n&&void 0!==n?n:[]],editorProps:{attributes:{class:(0,l.m)(i()("relative max-w-none [&>pre]:p-2 [&>pre]:rounded-lg focus:outline-none min-h-[60px] text-neutral-800 scale-tailwind wysiwyg wysiwyg-chat wysiwyg-sm",e))}}},[f,null===m||void 0===m?void 0:m.mathToken]);return g?(0,r.jsxs)(o.rU.Provider,{value:{editor:g},children:[(0,r.jsx)(G,{defaultTokens:m}),(0,r.jsx)(F.TG.Provider,{value:{editorRef:h},children:t})]}):null}var Y=(0,v.memo)(q)},935018:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(824246),o=n(855549),s=n(60042),a=n.n(s),i=n(53355);var l=i.hj.create({name:"disableAllShortcuts",addKeyboardShortcuts:()=>({"Mod-b":()=>!0,"Mod-i":()=>!0,"Mod-u":()=>!0,"Mod-shift-x":()=>!0,"Mod-shift-h":()=>!0,"Mod-e":()=>!0,"Mod-alt-0":()=>!0,"Mod-alt-1":()=>!0,"Mod-alt-2":()=>!0,"Mod-alt-3":()=>!0,"Mod-alt-4":()=>!0,"Mod-alt-5":()=>!0,"Mod-alt-6":()=>!0,"Mod-shift-7":()=>!0,"Mod-shift-8":()=>!0,"Mod-shift-9":()=>!0,"Mod-shift-b":()=>!0,"Mod-shift-l":()=>!0,"Mod-shift-e":()=>!0,"Mod-shift-r":()=>!0,"Mod-shift-j":()=>!0,"Mod-alt-c":()=>!0,"Mod-,":()=>!0,"Mod-.":()=>!0,Enter:({editor:e})=>e.commands.keyboardShortcut("shift-Enter")})});var c=n(56065).U.extend({addStorage:()=>({markdown:{serialize:(e,t,n,r)=>{for(let o=r+1;o<n.childCount;o++)if(n.child(o).type!==t.type)return void("inTable"in e&&!e.inTable&&e.write("\n"))},parse:{}}})}),d=n(980991),u=n(939904),p=n(686356);const m=i.hj.create({addKeyboardShortcuts:()=>({Enter:({editor:e})=>e.commands.setHardBreak(),"Shift-Enter":()=>!0})});var f=n(722206),h=n(946969),g=n(827378),b=n(717809),v=n(483563),x=n(128157),y=n(102396),w=n(829714),k=n(172570);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}function S({children:e,extensions:t,initialContent:n,editorProps:s}){var i;const j=(0,g.useRef)(null),S=null===(i=null===t||void 0===t?void 0:t.find((e=>"mention"===e.name)))||void 0===i?void 0:i.options,T=(0,f.Uk)(null!==n&&void 0!==n?n:"",S),O=(0,o.jE)({content:T,immediatelyRender:!1,parseOptions:{preserveWhitespace:"full"},extensions:[p.Z,f.ZP.configure({type:"text"}),h.Z.configure({blockquote:!1,bold:!1,bulletList:!1,code:!1,codeBlock:!1,heading:!1,listItem:!1,orderedList:!1,strike:!1,italic:!1,hardBreak:!1}),c,u.Z,d.Z,l,m,v.ZP,x.Z,w.Z,k.Z,...null!==t&&void 0!==t?t:[]],editorProps:C({attributes:{class:a()("relative wysiwyg wysiwyg-sm max-w-none [&>pre]:p-2 [&>pre]:rounded-lg wysiwyg-p:text-neutral-800 focus:outline-none min-h-[60px]")}},s,{handlePaste(e,t){var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;const o=(0,f.vT)(r,S).map((t=>"text"===t.type?e.state.schema.text(t.text):"hardBreak"===t.type?e.state.schema.node("hardBreak"):"mention"===t.type?e.state.schema.node("mention"):null)).filter(Boolean),s=y.HY.fromArray(o),a=e.state.tr.replaceSelectionWith(s,!1);return e.dispatch(a),!0}})},[]);return O?(0,r.jsx)(o.rU.Provider,{value:{editor:O},children:(0,r.jsx)(b.TG.Provider,{value:{editorRef:j},children:e})}):null}},643672:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(855549),o=n(827378);function s(){const{editor:e}=(0,r.fi)();var t;const{0:n,1:s}=(0,o.useState)(null!==(t=null===e||void 0===e?void 0:e.isEditable)&&void 0!==t&&t);return(0,o.useEffect)((()=>{if(e)return s(e.isEditable),e.on("update",t),()=>{e.off("update",t)};function t({editor:e}){s(e.isEditable)}}),[e]),n}},330201:function(e,t,n){n.d(t,{n3:function(){return P.n3},ML:function(){return d.ZP},Nf:function(){return a.Z},AH:function(){return j.Z},bk:function(){return l},bt:function(){return P.bt},BI:function(){return P.BI},UV:function(){return k},yD:function(){return S.Z},u3:function(){return W},LZ:function(){return c.Z},Tg:function(){return P.Tg},MB:function(){return v},Tw:function(){return N},WT:function(){return C.Z},o0:function(){return P.o0},bI:function(){return y}});var r=n(824246),o=n(827378);n(792739);n(331542);n(298784);n(285556);var s;!function(e){e.SelectedMatchUpdated="selectedMatchUpdated",e.LoadingUpdated="languageToolLoading",e.ErrorsUpdated="languageToolError",e.IgnoredWordsUpdated="languageToolIgnoredWords"}(s||(s={}));var a=n(173130),i=n(720227);function l({children:e,className:t}){return e?(0,r.jsx)("div",{className:(0,i.m)("border-t border-neutral-200 px-2 py-1 bg-neutral-50 rounded-b",t),children:e}):null}var c=n(935018),d=n(717809),u=n(855549),p=n(60042),m=n.n(p),f=n(722206);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e){var{className:t,content:n,disableCopy:s,onDisabledCopy:a,enableRTL:l=!1}=e,c=g(e,["className","content","disableCopy","onDisabledCopy","enableRTL"]);const{editor:p}=(0,u.fi)(),{editorRef:b}=(0,d.RP)();return(0,o.useEffect)((function(){null===p||void 0===p||p.setEditable(!1)}),[p]),(0,o.useEffect)((function(){if(!p)return;(0,f.BY)(p)(n,!1)}),[p,n]),(0,o.useEffect)((function(){p&&p.commands.updateDisableCopy(!!s)}),[p,s]),(0,o.useEffect)((function(){p&&(p.storage.noCopyPaste.onDisabledCopy=a)}),[p,a]),(0,r.jsx)(u.kg,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},c,{className:(0,i.m)(m()("relative w-full placeholder:text-muted-foreground px-2 py-2",{"text-right":l},t)),dir:l?"rtl":"ltr",editor:p,ref:b}))}var v=(0,o.memo)(b),x=(n(492325),n(759784));function y(){const{editor:e}=(0,u.fi)();var t;const{0:n,1:s}=(0,o.useState)(null!==(t=null===e||void 0===e?void 0:e.getText())&&void 0!==t?t:"");return(0,o.useEffect)((()=>{if(!e)return;const t=({editor:e})=>{const t=(0,f.Xm)(e);t&&s(t())};return e.on("update",t),()=>{e.off("update",t)}}),[e]),e?(0,r.jsx)(x.Z,{text:n,active:e.isEditable}):null}var w=n(53355);var k=w.hj.create({name:"keyHandler",addOptions:()=>({shortcuts:{}}),addKeyboardShortcuts(){return this.options.shortcuts}}),j=(n(664098),n(822933)),C=n(526604),S=(n(983876),n(535589)),T=n(634954);function O(){const{editor:e}=(0,u.fi)();return e?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j.Z,{name:"ReadOnlyFloatingMenu",shouldShow:({editor:e})=>!e.isEditable&&!e.state.selection.empty,children:(0,r.jsx)(T.k,{})})}):null}var N=(0,o.memo)(O),E=n(483563),P=n(754866),M=n(444506),R=n(946969),I=n(980991),A=n(686356),D=n(590987),L=n(787529);const B=({editor:e,node:t})=>{var n,o,s,a,i,l;const c=null!==(l=null===(n=t)||void 0===n||null===(o=n.content)||void 0===o||null===(s=o.content)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.text)&&void 0!==l?l:"";var d;const p=null!==(d=null===t||void 0===t||null===(i=t.attrs)||void 0===i?void 0:i.language)&&void 0!==d?d:"plaintext",m=(0,f.Xm)(e)(),h=(0,L.LQ)(m),g=h.findIndex((e=>e.code===String(c).replace(/\n$/,"")));return(0,r.jsx)(u.T5,{as:"div",contentEditable:!1,className:"react-monaco-code-block bg-neutral-800 not-wysiwyg text-neutral-0 border-neutral-700 border rounded overflow-hidden",children:(0,r.jsx)(D.Z,{code:c,languageOverride:p,codeBlockIndex:g,codeBlocksInMarkdownText:h})})};var _=(0,o.memo)(B);const $="language-";var Z=w.NB.create({name:"executableCodeBlock",content:"text*",group:"block",marks:"",code:!0,defining:!0,addStorage:()=>({markdown:{serialize(e,t){const n=t.textContent||"";e.write("```"+(t.attrs.language||"")),e.write("\n"),e.text(n,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:null!==(t=this.options.languageClassPrefix)&&void 0!==t?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}),addAttributes:()=>({language:{default:null,parseHTML:e=>{var t;const n=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith($))).map((e=>e.replace($,"")))[0];return n||null},rendered:!1}}),parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML:({node:e,HTMLAttributes:t})=>["pre",t,["code",{class:e.attrs.language?$+e.attrs.language:null},0]],addNodeView:()=>(0,u.fW)(_)}),z=n(144849),H=n(128157),F=n(829714);function V({className:e,children:t,extensions:n,initialContent:s,defaultTokens:a=M.Z,enableMath:l=!1}){const c=(0,o.useRef)(null),p=(0,u.jE)({content:s,immediatelyRender:!1,extensions:[A.Z,z.Z.configure({enableMath:l,boldToken:a.boldToken,italicToken:a.italicToken,bulletListToken:a.bulletListToken,mathToken:a.mathToken}),f.ZP.configure({type:"markdown"}),R.V.configure({text:!1,bold:!1,italic:!1,bulletList:!1,listItem:!1,codeBlock:!1,paragraph:!1}),I.Z,E.ZP,H.Z,Z,F.Z,...null!==n&&void 0!==n?n:[]],editorProps:{attributes:{class:(0,i.m)(m()("relative max-w-none [&>pre]:p-2 [&>pre]:rounded-lg focus:outline-none min-h-[60px] text-neutral-800 scale-tailwind wysiwyg wysiwyg-chat wysiwyg-sm",e))}}},[l,null===a||void 0===a?void 0:a.mathToken]);return p?(0,r.jsx)(u.rU.Provider,{value:{editor:p},children:(0,r.jsx)(d.TG.Provider,{value:{editorRef:c},children:t})}):null}var W=(0,o.memo)(V)},829714:function(e,t,n){n.d(t,{g:function(){return s}});var r=n(53355),o=n(429451);function s(e){if(e&&e.storage.alert)return e.storage.alert.eventBus}const a=r.hj.create({name:"alert",addStorage:()=>({eventBus:new o.N}),addCommands(){return{showWarning:e=>({editor:t})=>{const{from:n}=t.state.selection,r=t.view.coordsAtPos(n);return this.storage.eventBus.emit("warning",{message:e,coords:r}),!0}}}});t.Z=a},722206:function(e,t,n){n.d(t,{BY:function(){return s},Xm:function(){return a},vT:function(){return i},Uk:function(){return l}});var r=n(53355),o=n(189058);function s(e){var t,n;const r=null===(t=e.storage)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.parseContent;if(!r)throw new Error("Content parser is not available. Make sure the Content extension is enabled.");return r}function a(e){var t,n;const r=null===(t=e.storage)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.getContent;if(!r)throw new Error("Content serializer is not available. Make sure the Content extension is enabled.");return r}function i(e,t){const n=e.split("\n").map(((e,n,r)=>{const s=n===r.length-1;if(""===e)return s?[]:[{type:"hardBreak"}];let a;return a=t?function(e,t="@",n=[],r=!0){const s=(0,o.i)(t),a=[...e.matchAll(s)];let i=0;const l=[];for(const o of a){const s=o.index+(o[0].startsWith(" ")?1:0),a=o.index+o[0].length;if(s>i&&l.push({type:"text",text:e.substring(i,s)}),r){const e=n.find((e=>o[2].startsWith(e.id)||o[2].startsWith(e.label)));if(e){l.push({type:"mention",attrs:{id:e.id,label:e.label}});const n=o[0].trim().replace(t,"").replace(e.label,"");n.length&&l.push({type:"text",text:n})}else l.push({type:"text",text:o[1]});o[0].endsWith(" ")&&l.push({type:"text",text:" "})}else l.push({type:"mention",attrs:{id:o[2].trim(),label:o[2].trim()}});i=a}return i<e.length&&l.push({type:"text",text:e.substring(i)}),l}(e,t.char,t.items,t.parseKnownOnly):[{type:"text",text:e}],s?[...a]:[...a,{type:"hardBreak"}]})).flat();return n}function l(e,t){return{type:"doc",content:[{type:"paragraph",content:i(e,t).flat()}]}}const c=r.hj.create({name:"content",addOptions:()=>({type:"text"}),addStorage(){return{type:this.options.type}},onBeforeCreate(){this.editor.storage.content={type:this.options.type,getContent:()=>{const e=this.options.type,t=this.editor.storage.markdown;if(!t&&"markdown"===e)throw new Error("Markdown storage is not available");return"text"===e?this.editor.getText():"markdown"===e?t.getMarkdown():this.editor.getHTML()},parseContent:(e,t)=>{const n=this.options.type,r=this.editor,o=t||r.isFocused;switch(n){case"text":if(!o&&void 0!==e&&e!==r.getText()){const t=r.storage.mention,n=l(e,null===t||void 0===t?void 0:t.mention);setTimeout((()=>{r.commands.setContent(n,!1)}))}break;case"markdown":{const t=r.storage.markdown;if(!t&&"markdown"===n)throw new Error("Markdown storage is not available");const s=t.getMarkdown();o||void 0===e||e===s||r.commands.setContent(e,!1,{preserveWhitespace:!0});break}case"html":{const t=r.getHTML();o||void 0===e||e===t||setTimeout((()=>{r.commands.setContent(e,!1,{preserveWhitespace:"full"})}))}}}}}});t.ZP=c},980991:function(e,t,n){var r=n(53355),o=n(616711);const s=r.hj.create({name:"noCopyPaste",addOptions:()=>({disableCopy:!1,disablePaste:!1,onDisabledCopy:()=>{},onDisabledPaste:()=>{}}),addStorage(){return{onDisabledCopy:this.options.onDisabledCopy,onDisabledPaste:this.options.onDisabledPaste}},addCommands(){return{updateDisableCopy:e=>()=>(this.options.disableCopy=e,this.editor.view.updateState(this.editor.state),!0),updateDisablePaste:e=>()=>(this.options.disablePaste=e,this.editor.view.updateState(this.editor.state),!0)}},addProseMirrorPlugins(){const e=new o.H$("noCopyPastePlugin"),t=this.storage.onDisabledCopy,n=this.storage.onDisabledPaste;return[new o.Sy({key:e,props:{handleDOMEvents:{copy:(e,n)=>!!this.options.disableCopy&&(n.preventDefault(),null===t||void 0===t||t(),!0),cut:(e,n)=>!!this.options.disableCopy&&(n.preventDefault(),null===t||void 0===t||t(),!0),paste:(e,t)=>!!this.options.disablePaste&&(t.preventDefault(),null===n||void 0===n||n(),!0)}}})]}});t.Z=s},939904:function(e,t,n){const r=n(386422).V.extend({addOptions:()=>({emptyEditorClass:"before:content-[attr(data-placeholder)] before:text-muted-foreground before:float-left before:h-0 before:pointer-events-none",emptyNodeClass:"is-empty",placeholder:"",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}),addCommands(){return{updatePlaceholder:e=>()=>(this.options.placeholder=e,this.editor.view.updateState(this.editor.state),!0)}}});t.Z=r},128157:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(53355),o=n(429451);function s(e){if(e&&e.storage.reviewerCopilot)return e.storage.reviewerCopilot}t.Z=new r.hj({name:"reviewerCopilot",addStorage:()=>({enabled:!1,open:!1,eventBus:new o.N}),addCommands(){return{setCopilotEnabled:e=>()=>(this.storage.enabled=e,this.storage.eventBus.emit("enabledChange",e),!0),setCopilotOpen:e=>()=>(this.storage.open=e,this.storage.eventBus.emit("openChange",e),!0)}}})},172570:function(e,t,n){var r=n(53355),o=n(616711);const s=["ltr","rtl","auto"],a=r.hj.create({name:"textDirection",addOptions:()=>({types:["paragraph","heading"],defaultDirection:"auto"}),addGlobalAttributes(){return[{types:this.options.types,attributes:{dir:{default:null,rendered:!0,parseHTML:e=>e.dir||this.options.defaultDirection,renderHTML:e=>({dir:e.dir})}}}]},addCommands(){return{setTextDirection:e=>({commands:t})=>!!s.includes(e)&&(this.options.defaultDirection=e,this.options.types.every((n=>t.updateAttributes(n,{dir:e}))))}},addProseMirrorPlugins(){return[new o.Sy({key:new o.H$("textDirection"),appendTransaction:(e,t,n)=>{if(!e.some((e=>e.docChanged)))return;let r=!1;const o=n.tr;return n.doc.descendants(((e,t)=>{if(this.options.types.includes(e.type.name)){if(null!==e.attrs.dir&&e.textContent.length>0)return;const n=o.storedMarks||[];o.setNodeAttribute(t,"dir",this.options.defaultDirection);for(const e of n)o.addStoredMark(e);r=!0}})),r?o:null}})]}});t.Z=a},686356:function(e,t,n){var r=n(53355),o=n(616711),s=n(711719);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}const l=new Set;t.Z=new r.hj({name:"unique-id",priority:99999,addOptions:()=>({attributeName:"id",createId:()=>(0,s.v4)()}),addGlobalAttributes(){return[{types:["paragraph","heading"],attributes:{[this.options.attributeName]:{default:null,rendered:!0,keepOnSplit:!1}}}]},onCreate(){!function(e,t,n){const{tr:r,doc:o}=e,{attributeName:s,createId:a}=n;let c=!1;o.descendants(((e,t)=>{if("codeBlock"===e.type.name)return!1;if(e.isTextblock&&!e.attrs[s]){const n=a();r.setNodeMarkup(t,void 0,i({},e.attrs,{[s]:n})),l.add(n),c=!0}})),c&&(r.setMeta("addToHistory",!1),t.dispatch(r))}(this.editor.state,this.editor.view,this.options)},addProseMirrorPlugins(){const{attributeName:e,createId:t}=this.options;return[new o.Sy({key:new o.H$("unique-id"),appendTransaction(n,o,s){if(!n.some((({docChanged:e})=>e)))return null;let a=!1;const c=s.tr,d=(0,r.XP)(o.doc,n);return(0,r.QC)(d).forEach((({newRange:n})=>{(0,r.b5)(s.doc,n,(e=>e.isTextblock)).forEach((({node:n,pos:r})=>{if(!n.attrs[e]){const o=t();c.setNodeMarkup(r,void 0,i({},n.attrs,{[e]:o})),l.add(o),a=!0}}))})),a?c:null}})]}})},483563:function(e,t,n){n.d(t,{$v:function(){return p},EQ:function(){return m}});var r,o=n(53355),s=n(616711),a=n(515463),i=n(138944),l=n(429451);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}!function(e){e.CommentsUpdated="CommentsUpdated",e.PluginEnabledUpdated="PluginEnabledUpdated"}(r||(r={}));const u=o.hj.create({name:"comment",addOptions:()=>({enabled:!1}),addStorage(){return{enabled:this.options.enabled,isFocused:!1,selectedCommentId:null,comments:[],selection:null,eventBus:new l.N}},addCommands(){return{selectComment:e=>({tr:t})=>this.storage.selectedCommentId!==e&&(this.storage.selectedCommentId=e,this.storage.eventBus.emit("commentSelected",e),t.setMeta(r.CommentsUpdated,!0),!0),deselectComment:()=>({tr:e})=>null!==this.storage.selectedCommentId&&(this.storage.selectedCommentId=null,this.storage.eventBus.emit("commentSelected",null),e.setMeta(r.CommentsUpdated,!0),!0),deleteComment:e=>({tr:t})=>!!this.storage.comments.find((t=>t.id===e))&&(this.storage.comments=this.storage.comments.filter((t=>t.id!==e)),t.setMeta(r.CommentsUpdated,!0),!0),addComment:e=>({tr:t})=>!this.storage.comments.find((t=>t.id===e.id))&&(this.storage.comments.push(e),t.setMeta(r.CommentsUpdated,!0),!0),dropComments:()=>({tr:e})=>0!==this.storage.comments.length&&(this.storage.comments=[],e.setMeta(r.CommentsUpdated,!0),!0),setComments:e=>({tr:t})=>!this.storage.isFocused&&(this.storage.comments=e,this.storage.selection=null,t.setMeta(r.CommentsUpdated,!0),!0),enableComments:()=>({tr:e})=>!this.storage.enabled&&(this.storage.enabled=!0,this.storage.eventBus.emit("enabledChanged",!0),e.setMeta(r.PluginEnabledUpdated,!0),!0),disableComments:()=>({tr:e})=>!!this.storage.enabled&&(this.storage.enabled=!1,this.storage.eventBus.emit("enabledChanged",!0),e.setMeta(r.PluginEnabledUpdated,!0),!0)}},onFocus(){this.storage.isFocused=!0},onBlur(){this.storage.isFocused=!1},addProseMirrorPlugins(){const e=this;return[new s.Sy({key:new s.H$("commentPlugin"),props:{decorations(e){var t;return null===(t=this.getState(e))||void 0===t?void 0:t.decorators},handleDOMEvents:{click:(e,t)=>{const n=t.target;return n&&(null===n||void 0===n?void 0:n.classList.contains("comment"))&&n.id?this.editor.commands.selectComment(n.id):this.editor.commands.deselectComment(),!1}}},state:{init:()=>({decorators:a.EH.empty}),apply:(e,t)=>{if(!this.storage.enabled)return{decorators:a.EH.empty};const n=e.getMeta(r.CommentsUpdated);let o=t.decorators;return(e.docChanged||n)&&(o=function(e,t,n){const r=t.map((e=>a.p.inline(e.range.from,e.range.to,{class:(0,i.default)("comment hover:bg-primary-200 hover:cursor-pointer",{"bg-primary-100":e.id!==n,"bg-primary-200":e.id===n}),id:e.id},{id:e.id,inclusiveLeft:!0,inclusiveRight:!0})));return a.EH.create(e,r)}(e.doc,this.storage.comments,this.storage.selectedCommentId)),{decorators:o}}},filterTransaction:e=>{if(!this.storage.enabled)return!0;const t=e.doc.nodeSize-e.before.nodeSize,n=(t,n="You have to rate the comment to be able to edit the highlighted area!")=>{e.setMeta(r.CommentsUpdated,!0),this.editor.commands.selectComment(t[0].id),window.alert(n)};if(!e.before.eq(e.doc)){const o=e.selection.from-t,s=this.storage.comments,a=s.filter((e=>e.range.from<o&&e.range.to>o||t<0&&e.range.to===o));if(a.length)return n(a),!1;if(t<-1){const r=s.filter((n=>n.range.to>e.selection.from&&n.range.to<e.selection.from+Math.abs(t)||n.range.from<e.selection.from+Math.abs(t)&&n.range.from>e.selection.from));for(const t of r){const r=t.range.to-e.selection.from;if(t.range.to-r<=t.range.from)return n([t],"You have to rate the comment to be able to delete the highlighted area!"),!1}}if(-1===t){const e=s.filter((e=>e.range.from<o&&e.range.to>=o));if(e.length&&e[0].range.from===e[0].range.to+t)return n(e,"You have to rate the comment to be able to remove the highlighted area!"),!1}const i=[];this.storage.comments=s.map((n=>{if(t<-1&&n.range.to>e.selection.from&&n.range.to<e.selection.from+Math.abs(t)||n.range.from<e.selection.from+Math.abs(t)&&n.range.from>e.selection.from){const t=n.range.to-e.selection.from,r={from:n.range.from,to:n.range.to-t};return i.push({id:n.id,range:r}),d({},n,{range:r})}if(n.range.from>=o){const e={from:n.range.from+t,to:n.range.to+t};return i.push({id:n.id,range:e}),d({},n,{range:e})}return d({},n)})),this.storage.eventBus.emit("batchCommentRangeUpdated",i),e.setMeta(r.CommentsUpdated,!0)}return!0}}),new s.Sy({state:{init:()=>({deco:a.EH.empty}),apply(e,t,n,r){const o=r.selection;if(o){return{deco:a.EH.create(r.doc,[a.p.inline(o.$from.pos,o.$to.pos,{class:"bg-warning-100"},{inclusiveLeft:!0,inclusiveRight:!0})])}}return{deco:a.EH.empty}}},props:{decorations(t){return!e.storage.enabled||e.editor.isEditable?null:t&&this.getState(t)?this.getState(t).deco:null}}})]}});function p(e){if(e)return e.storage.comment}const m=e=>{const{selection:t}=e.state;if(t.empty)return{range:null,content:""};return{range:{from:t.$from.pos,to:t.$to.pos},content:t.content().content.textBetween(0,t.content().content.size)}};t.ZP=u},144849:function(e,t,n){n.d(t,{Z:function(){return q}});var r=n(53355),o=n(416817),s=n(616711),a=n(938910);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,c=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,d=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,u=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,p=e=>new s.Sy({key:new s.H$(`${e}-spaceless-punctuation`),appendTransaction:(t,n,r)=>{let o=r.tr,s=!1;return r.doc.descendants(((t,n)=>{t.isText&&t.marks.forEach((a=>{if(a.type.name===e){const e=t.text;if(/[^\p{L}\p{N}\s]$/u.test(null!==e&&void 0!==e?e:"")){const e=n+t.nodeSize,a=r.doc.textBetween(e,e+1,null,"");a&&!/\s/.test(a)&&(o=o.insertText(" ",e),s=!0)}}}))})),s?o:null}});var m=o.ZP.extend({addStorage:()=>({markdown:{serialize:{open:(e,t)=>t.attrs.token,close:(e,t)=>t.attrs.token,mixable:!0,expelEnclosingWhitespace:!0},parse:{setup(e){e.renderer.rules.strong_open=(e,t,n,r,o)=>{const s=e[t],a=s.markup;return s.attrSet("token",a),o.renderToken(e,t,n)}}}}}),addCommands(){var e;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},null===(e=this.parent)||void 0===e?void 0:e.call(this),{toggleBoldWithDefaultToken:()=>({commands:e})=>{var t;const n=null!==(t=this.editor.storage.markdownExtensions.boldToken)&&void 0!==t?t:a.BoldToken.ASTERISK;return e.toggleMark(this.name,{token:n}),!0}})},addAttributes:()=>({token:{default:"**",renderHTML:e=>({token:e.token})}}),addInputRules(){return[(0,r.Cf)({find:l,type:this.type,getAttributes:()=>({token:"**"})}),(0,r.Cf)({find:d,type:this.type,getAttributes:()=>({token:"__"})})]},addPasteRules(){return[(0,r.K9)({find:c,type:this.type,getAttributes:()=>({token:"**"})}),(0,r.K9)({find:u,type:this.type,getAttributes:()=>({token:"__"})})]},addProseMirrorPlugins:()=>[p("bold")]}),f=n(857074);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,b=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,v=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,x=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g;var y=f.ZP.extend({addStorage:()=>({markdown:{serialize:{open:(e,t)=>t.attrs.token,close:(e,t)=>t.attrs.token,mixable:!0,expelEnclosingWhitespace:!0},parse:{setup(e){e.renderer.rules.em_open=(e,t,n,r,o)=>{const s=e[t],a=s.markup;return s.attrSet("token",a),o.renderToken(e,t,n)}}}}}),addCommands(){var e;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({},null===(e=this.parent)||void 0===e?void 0:e.call(this),{toggleItalicWithDefaultToken:()=>({commands:e})=>{var t;const n=null!==(t=this.editor.storage.markdownExtensions.italicToken)&&void 0!==t?t:a.ItalicToken.ASTERISK;return e.toggleMark(this.name,{token:n}),!0}})},addAttributes:()=>({token:{default:"*",renderHTML:e=>({token:e.token})}}),addInputRules(){return[(0,r.Cf)({find:g,type:this.type,getAttributes:()=>({token:"*"})}),(0,r.Cf)({find:v,type:this.type,getAttributes:()=>({token:"_"})})]},addPasteRules(){return[(0,r.K9)({find:b,type:this.type,getAttributes:()=>({token:"*"})}),(0,r.K9)({find:x,type:this.type,getAttributes:()=>({token:"_"})})]},addProseMirrorPlugins:()=>[p("italic")]}),w=n(238379),k=n(251655);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}const S=/^\s*([-+*])\s$/;var T=w.ZP.extend({addStorage:()=>({markdown:{serialize:(e,t)=>(Object.assign(t,{attrs:C({},t.attrs,{tight:!0})}),e.renderList(t,"  ",(()=>t.attrs.token+" "))),parse:{setup(e){e.renderer.rules.bullet_list_open=(e,t,n,r,o)=>{const s=e[t],a=e[t+1].markup||"";return s.attrSet("token",a),o.renderToken(e,t,n)}}}}}),addCommands(){var e;return C({},null===(e=this.parent)||void 0===e?void 0:e.call(this),{toggleBulletListWithDefaultToken:()=>({commands:e})=>{var t;const n=null!==(t=this.editor.storage.markdownExtensions.bulletListToken)&&void 0!==t?t:a.BulletListToken.ASTERISK;return e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks,{token:n}),!0}})},addAttributes:()=>({token:{default:"*",renderHTML:e=>({token:e.token})}}),addInputRules(){let e=(0,r.S0)({find:S,type:this.type,getAttributes:e=>({token:e[1]})});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,r.S0)({find:S,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>(0,r.P1)(this.editor.getAttributes(k.Z.name),{token:e[1]}),editor:this.editor})),[e]}}),O=n(491077),N=n(102396),E=n(8465);const P=e=>({state:t,dispatch:n})=>{const o=(0,r.jo)(e,t.schema),{$from:s}=t.selection;return function(e,t){return function(n,r){const{$from:o,$to:s}=n.selection,a=o.blockRange(s,(t=>t.childCount>0&&t.firstChild.type===e));if(!a)return!1;const i=a.startIndex;if(0===i)return!1;const l=a.parent,c=l.child(i-1);if(c.type!==e)return!1;if(r){const o=l.type.name===T.name?{token:t}:null,s=c.lastChild&&c.lastChild.type===l.type,i=N.HY.from(s?e.create():null),d=new N.p2(N.HY.from(e.create(null,N.HY.from(l.type.create(o,i)))),s?3:1,0),u=a.start,p=a.end;r(n.tr.step(new E.FC(u-(s?3:1),p,u,p,d,1,!0)).scrollIntoView())}return!0}}(o,s.node(-2).attrs.token||"*")(t,n)};var M=O.Z.extend({addCommands:()=>({customSinkListItem:e=>P(e)}),addKeyboardShortcuts(){var e;return Object.assign({},(null===(e=this.parent)||void 0===e?void 0:e.call(this))||{},{Tab:()=>this.editor.commands.customSinkListItem(this.name)})}}),R=n(893665);var I=r.NB.create({name:"markdownHTMLNode",addStorage:()=>({markdown:{serialize(e,t,n){this.editor.storage.markdown.options.html?e.write(function(e,t){const n=e.type.schema,o=(0,r.d1)(N.HY.from(e),n);if(e.isBlock&&(t instanceof N.HY||t.type.name===n.topNodeType.name))return function(e){const t=function(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}(e).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`\n${t.innerHTML}\n`:"\n",t.outerHTML}(o);return o}(t,n)):(console.warn(`Tiptap Markdown: "${t.type.name}" node is only available in html mode`),e.write(`[${t.type.name}]`)),t.isBlock&&e.closeBlock(t)},parse:{}}})});function A(e){var t,n;return null!==(n=null===e||void 0===e||null===(t=e.content)||void 0===t?void 0:t.content)&&void 0!==n?n:[]}var D=R.ZP.extend({addProseMirrorPlugins(){return[new s.Sy({props:{handlePaste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");if(r){const t=document.createElement("div");t.innerHTML=r;const n=t.querySelector("table");if(n){if(this.editor.isActive(this.type.name))return!0;n.querySelectorAll("td, th").forEach((e=>{e.removeAttribute("colspan"),e.removeAttribute("rowspan")}));const r=n.querySelector("tr");r&&r.querySelectorAll("td").forEach((e=>{const t=document.createElement("th");t.innerHTML=e.innerHTML,e.replaceWith(t)}));const o=N.aw.fromSchema(e.state.schema).parse(t),s=e.state.tr.replaceSelectionWith(o);return e.dispatch(s),!0}}return!1}}})]},addStorage:()=>({markdown:{serialize(e,t,n){!function(e){const t=A(e),n=t[0],r=t.slice(1);if(A(n).some((e=>L(e)||e.childCount>1)))return!1;if(r.some((e=>A(e).some((e=>L(e)||e.childCount>1)))))return!1;return!0}(t)?I.storage.markdown.serialize.call(this,e,t,n):(e.inTable=!0,t.forEach(((t,n,r)=>{if(e.write("| "),t.forEach(((t,n,r)=>{r&&e.write(" | ");const o=t.firstChild;(null===o||void 0===o?void 0:o.textContent.trim())&&e.renderInline(o)})),e.write(" |"),e.ensureNewLine(),!r){const n=Array.from({length:t.childCount}).map((()=>"---")).join(" | ");e.write(`| ${n} |`),e.ensureNewLine()}})),e.closeBlock(t),e.inTable=!1)},parse:{}}})});function L(e){return e.attrs.colspan>1||e.attrs.rowspan>1}var B=n(731248),_=n(77427),$=B.Z.extend({addKeyboardShortcuts:()=>({Enter:({editor:e})=>{const{state:t,commands:n}=e;return!!(0,_.Tr)(t.schema.nodes.tableCell)(t.selection)&&(n.setHardBreak(),!0)}})}),Z=n(695674).Z.extend({addKeyboardShortcuts:()=>({Enter:({editor:e})=>{const{state:t,commands:n}=e;return!!(0,_.Tr)(t.schema.nodes.tableHeader)(t.selection)&&(n.setHardBreak(),!0)}})}),z=n(227202),H=n(627758),F=n(465259),V=n(465060),W=F.Z.extend({addKeyboardShortcuts:()=>({Enter:({editor:e})=>{var t;const{state:n}=e,{$from:r,$to:o}=n.selection;e.commands.setMeta("key","enter");const s="paragraph"===r.parent.type.name&&0===r.parent.content.size;if([n.schema.nodes.listItem,n.schema.nodes.tableCell,n.schema.nodes.tableHeader,n.schema.nodes.blockquote,n.schema.nodes.image].some((e=>(0,_.Tr)(e)(n.selection))))return!1;if("doc"===r.node().type.name)return!1;const a=0===r.parentOffset,i=r.parentOffset===r.node().content.size,l=r.doc.nodeAt(o.pos+1),c=l&&"paragraph"===l.type.name&&0===l.content.size&&"paragraph"===r.parent.type.name&&i,d=r.index(r.depth-1),u=e.getJSON(),p=d-1>=0?null===(t=u.content)||void 0===t?void 0:t[d-1]:null,m="paragraph"===(null===p||void 0===p?void 0:p.type)&&!(null===p||void 0===p?void 0:p.content)&&a&&"paragraph"===r.parent.type.name;return!!(s||c||m)&&(e.commands.showWarning("Try to avoid extra blank lines, if necessary use Shift + Enter"),!0)}}),addStorage:()=>({markdown:{serialize:V.Dm.nodes.paragraph,parse:{}}})});var U=n(252856).Z.extend({addStorage:()=>({markdown:{serialize(e,t){var n,r;e.text(null===(r=null!==(n=t.text)&&void 0!==n?n:"")||void 0===r?void 0:r.replace(/</g,"<").replace(/>/g,">"))},parse:{}}})}),K=n(404598),J=n(361165),G=n(664098);var q=r.hj.create({name:"markdownExtensions",addOptions:()=>({enableMath:!1,boldToken:a.BoldToken.ASTERISK,italicToken:a.ItalicToken.ASTERISK,bulletListToken:a.BulletListToken.ASTERISK,mathToken:a.MathToken.DOLLARS}),addStorage(){return{boldToken:this.options.boldToken,italicToken:this.options.italicToken,bulletListToken:this.options.bulletListToken,mathToken:this.options.mathToken}},addExtensions(){return[H.U.configure({breaks:!1}),m,y,T.configure({keepAttributes:!0}),M,D,$,Z,z.Z,W,U,K.ZP.configure({allowBase64:!0}),J.ZP,...this.options.enableMath?[G.Z.configure({allowedRules:[a.MathToken.DOLLARS,a.MathToken.BRACKETS,a.MathToken.ESCAPED_BRACKETS]})]:[]]}})},664098:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(53355),o=n(938910);const s=(e,t=!1,n)=>{const r=n>0&&e[n-1].charCodeAt(0);return t?!r||32===r:!r||92!==r&&(r<48||r>57)},a=(e,t=!1,n)=>{const r=e[n+1]&&e[n+1].charCodeAt(0);return t?!r||32===r||46===r||44===r||59===r:!r||r<48||r>57},i='<math-display class="math-node" open="$open" close="$close">$content</math-display>',l='<math-inline class="math-node" open="$open" close="$close">$content</math-inline>',c={[o.MathToken.BRACKETS]:{inline:[{name:"math_inline_block_bracket",rex:/\\\[([\s\S]+?)\\\]/gy,tmpl:i,tag:"\\[",closingTag:"\\]",displayMode:!0,pre:s,post:a},{name:"math_inline_bracket",rex:/\\\((.+?)\\\)/gy,tmpl:l,tag:"\\(",closingTag:"\\)"}],block:[{name:"math_block_bracket",rex:/\\\[([\s\S]+?)\\\]/gmy,tmpl:i,tag:"\\[",closingTag:"\\]"}]},[o.MathToken.ESCAPED_BRACKETS]:{inline:[{name:"math_inline_block_escaped_bracket",rex:/\\\\\[([\s\S]+?)\\\\\]/gy,tmpl:i,tag:"\\\\[",closingTag:"\\\\]",displayMode:!0,pre:s,post:a},{name:"math_inline_escaped_bracket",rex:/\\\\\((.+?)\\\\\)/gy,tmpl:l,tag:"\\\\(",closingTag:"\\\\)"}],block:[{name:"math_block_escaped_bracket",rex:/\\\\\[([\s\S]+?)\\\\\]/gmy,tmpl:i,tag:"\\\\[",closingTag:"\\\\]"}]},[o.MathToken.DOLLARS]:{inline:[{name:"math_inline_double_dollars",rex:/\${2}([^$]*?[^\\])\${2}/gy,tmpl:i,tag:"$$",closingTag:"$$",displayMode:!0,pre:s,post:a},{name:"math_inline_dollars",rex:/\$((?:[^\s\\])|(?:\S.*?[^\s\\]))\$/gy,tmpl:l,tag:"$",closingTag:"$",outerSpace:!1,pre:s,post:a}],block:[{name:"math_block_dollars",rex:/\${2}([^$]*?[^\\])\${2}/gmy,tmpl:i,tag:"$$",closingTag:"$$"}]},gitlab:{inline:[{name:"math_inline_gitlab",rex:/\$`(.+?)`\$/gy,tmpl:l,tag:"$`",closingTag:"`$"}],block:[{name:"math_block_gitlab",rex:/`{3}math\s*([^`]*?)\s*`{3}/gm,tmpl:i,tag:"```math",closingTag:"```"}]}};function d(e){return"$$"===e?"$$$$":e}const u=e=>function(t,n){const r=t.pos,o=t.src,s=o.startsWith(e.tag,e.rex.lastIndex=r)&&(!e.pre||e.pre(o,null===e||void 0===e?void 0:e.outerSpace,r))&&e.rex.exec(o),a=!!s&&r<e.rex.lastIndex&&(!e.post||e.post(o,null===e||void 0===e?void 0:e.outerSpace,e.rex.lastIndex-1));if(a){if(!n){const n=t.push(e.name,"math",0);n.content=s[1],n.markup=e.tag}t.pos=e.rex.lastIndex}return a},p=e=>function(t,n,r,o){const s=t.bMarks[n]+t.tShift[n],a=t.src,i=a.startsWith(e.tag,e.rex.lastIndex=s)&&(!e.pre||e.pre(a,!1,s))&&e.rex.exec(a),l=!!i&&s<e.rex.lastIndex&&(!e.post||e.post(a,!1,e.rex.lastIndex-1));if(l&&!o){const o=e.rex.lastIndex-1;let s;for(s=n;s<r&&!(o>=t.bMarks[s]+t.tShift[s]&&o<=t.eMarks[s]);s++);const a=t.lineMax,l=t.parentType;t.lineMax=s,t.parentType="math","blockquote"===l&&(i[1]=i[1].replace(/(\n*?^(?:\s*>)+)/gm,""));const c=t.push(e.name,"math",0);c.block=!0,c.tag=e.tag,c.markup="",c.content=i[1],c.info=i[i.length-1],c.map=[n,s+1],t.parentType=l,t.lineMax=a,t.line=s+1}return l};var m=function(e,t){const n=function(e=[o.MathToken.DOLLARS]){const t={inline:[],block:[]};for(const n of e)n in c&&(t.inline.push(...c[n].inline),t.block.push(...c[n].block));return t}(null===t||void 0===t?void 0:t.delimiters);var r;const s=null!==(r=null===t||void 0===t?void 0:t.outerSpace)&&void 0!==r&&r;var a;const i=null!==(a=null===t||void 0===t?void 0:t.rules)&&void 0!==a?a:"all";if("all"===i||"inline"===i)for(const o of n.inline)s&&"outerSpace"in o&&(o.outerSpace=!0),e.inline.ruler.before("escape",o.name,u(o)),e.renderer.rules[o.name]=(e,t)=>o.tmpl.replace(/\$content/,e[t].content).replace(/\$open/,o.tag).replace(/\$close/,o.closingTag);if("all"===i||"block"===i)for(const o of n.block)e.block.ruler.before("fence",o.name,p(o)),e.renderer.rules[o.name]=(e,t)=>o.tmpl.replace(/\$content/,e[t].content).replace(/\$open/,d(o.tag)).replace(/\$close/,d(o.closingTag))},f=n(616711),h=n(8465),g=n(436927),b=n(555089),v=n(216228);function x(e,t,n,r=!0){return(o,s)=>{const a=e.state,{to:i,from:l}=a.selection,{to:c,from:d}=o.selection;if(r&&c!==d)return!1;const u=t>0?c:d;if(n){const e=o.doc.nodeSize-2;if(t>0&&u<e)return!1;if(t<0&&u>0)return!1}if(s){const n=t>0?i:l;e.dispatch(a.tr.setSelection(f.Bs.create(a.doc,n))),e.focus()}return!0}}var y=n(515463);class w{destroy(){this.closeEditor(!1),this._mathRenderElt&&(this._mathRenderElt.remove(),delete this._mathRenderElt),this._mathSrcElt&&(this._mathSrcElt.remove(),delete this._mathSrcElt),this.dom.remove()}ensureFocus(){this._innerView&&this._outerView.hasFocus()&&this._innerView.focus()}update(e){if(!e.sameMarkup(this._node))return!1;if(this._node=e,this._innerView){const t=this._innerView.state,n=e.content.findDiffStart(t.doc.content);if(null!=n){const r=e.content.findDiffEnd(t.doc.content);if(r){let{a:o,b:s}=r;const a=n-Math.min(o,s);a>0&&(o+=a,s+=a),this._innerView.dispatch(t.tr.replace(n,s,e.slice(n,o)).setMeta("fromOutside",!0))}}}return this._isEditing||this.renderMath(),!0}selectNode(){this._outerView.editable&&(this.dom.classList.add("ProseMirror-selectednode"),this._isEditing||this.openEditor())}deselectNode(){this.dom.classList.remove("ProseMirror-selectednode"),this._isEditing&&this.closeEditor()}stopEvent(e){return void 0!==this._innerView&&void 0!==e.target&&this._innerView.dom.contains(e.target)}ignoreMutation(){return!0}renderMath(){if(!this._mathRenderElt)return;const e=this._node.content.firstChild;let t="";if(null!==e&&(t=e.textContent.trim()),t.length<1)for(this.dom.classList.add("empty-math");this._mathRenderElt.firstChild;)this._mathRenderElt.firstChild.remove();else{this.dom.classList.remove("empty-math");try{v.Z.render(t,this._mathRenderElt,this._katexOptions),this._mathRenderElt.classList.remove("parse-error"),this.dom.setAttribute("title","")}catch(n){console.error(n),this._mathRenderElt.classList.add("parse-error"),this.dom.setAttribute("title",n.toString())}}}dispatchInner(e){if(!this._innerView)return;const{state:t,transactions:n}=this._innerView.state.applyTransaction(e);if(this._innerView.updateState(t),!e.getMeta("fromOutside")){const e=this._outerView.state.tr,t=h.KS.offset(this._getPos()+1);for(let r=0;r<n.length;r++){const o=n[r].steps;for(let n=0;n<o.length;n++){const r=o[n].map(t);if(!r)throw Error("step discarded!");e.step(r)}}e.docChanged&&this._outerView.dispatch(e)}}openEditor(){var e;if(this._innerView)return void console.warn("[prosemirror-math] editor already open when openEditor was called");this._innerView=new y.tk(this._mathSrcElt,{state:f.yy.create({doc:this._node,plugins:[(0,g.h)({Tab:(e,t)=>(t&&t(e.tr.insertText("\t")),!0),Backspace:(0,b.QF)(b.NE,(e=>!!e.selection.empty&&(!(this._node.textContent.length>0)&&(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0)))),"Ctrl-Backspace":()=>(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0),Enter:(0,b.QF)(b.QK,x(this._outerView,1,!1)),"Ctrl-Enter":x(this._outerView,1,!1),ArrowLeft:x(this._outerView,-1,!0),ArrowRight:x(this._outerView,1,!0),ArrowUp:x(this._outerView,-1,!0),ArrowDown:x(this._outerView,1,!0)})]}),dispatchTransaction:this.dispatchInner.bind(this)});const t=this._innerView.state;this._innerView.focus();const n=null===(e=this._mathPluginKey.getState(this._outerView.state))||void 0===e?void 0:e.prevCursorPos;null!==n&&void 0!==n||console.error("[prosemirror-math] Error:  Unable to fetch math plugin state from key.");const r=(null!==n&&void 0!==n?n:0)<=this._getPos()?0:this._node.nodeSize-2;this._innerView.dispatch(t.tr.setSelection(f.Bs.create(t.doc,r))),this._isEditing=!0}closeEditor(e=!0){this._innerView&&(this._innerView.destroy(),this._innerView=void 0),e&&this.renderMath(),this._isEditing=!1}constructor(e,t,n,r={},o){this._node=e,this._outerView=t,this._getPos=n,this._mathPluginKey=o,this._isEditing=!1,this._katexOptions=Object.assign({globalGroup:!0,throwOnError:!1},r.katexOptions),this._tagName=r.tagName||this._node.type.name.replace("_","-"),this.dom=document.createElement(this._tagName),this.dom.classList.add("math-node"),this.dom.setAttribute("open",this._node.attrs.open),this.dom.setAttribute("close",this._node.attrs.close),this._mathRenderElt=document.createElement("span"),this._mathRenderElt.textContent="",this._mathRenderElt.classList.add("math-render"),this.dom.appendChild(this._mathRenderElt),this._mathSrcElt=document.createElement("span"),this._mathSrcElt.classList.add("math-src"),this._mathSrcElt.spellcheck=!1,this.dom.appendChild(this._mathSrcElt),this.dom.addEventListener("click",(()=>this.ensureFocus())),this.renderMath()}}const k=new f.H$("prosemirror-math");function j(e){return(t,n,r)=>{const o=k.getState(n.state);if(!o)throw new Error("no math plugin!");return new w(t,n,r,{katexOptions:{displayMode:e,macros:o.macros}},k)}}const C=new f.Sy({key:k,state:{init:()=>({macros:{},prevCursorPos:0}),apply:(e,t,n)=>({macros:t.macros,prevCursorPos:n.selection.from})}}),S=/^\$\$?[\s\n]$/,T=/(?<!\\)\\\[[\s\n]$/,O=/\\\\\[[\s\n]$/;function N(e){return new r.VK({find:e.find,handler:({state:t,range:n,match:o})=>{const s=(0,r.nU)(e.getAttributes,void 0,o)||{},{tr:a}=t,i=n.from;let l=n.to;const c=e.type.create(s);if(o[1]){let e=i+o[0].lastIndexOf(o[1]);e>l?e=l:l=e+o[1].length;const t=o[0][o[0].length-1];a.insertText(t,i+o[0].length-1),a.replaceWith(e,l,c),(c.isTextblock||c.isInline)&&a.setSelection(f.Bs.create(a.doc,e))}else if(o[0]){const t=e.type.isInline?i:i-1,n=e.type.create(s);a.insert(t,n).delete(a.mapping.map(i),a.mapping.map(l)),(n.isTextblock||n.isInline)&&a.setSelection(f.Bs.create(a.doc,t))}a.scrollIntoView()}})}var E=r.NB.create({name:"math_display",group:"block math",content:"text*",atom:!0,code:!0,addOptions:()=>({allowedRules:[o.MathToken.DOLLARS]}),addStorage:()=>({markdown:{serialize(e,t){e.text(`${t.attrs.open}`,!1),e.text(`${t.textContent}`,!1),e.text(`${t.attrs.close}`,!1),e.ensureNewLine()},parse:{setup(e){const t=this.options.allowedRules;e.use(m,{delimiters:t,rules:"block"})}}}}),addAttributes:()=>({open:{default:"$$",renderHTML:e=>({open:e.open})},close:{default:"$$",renderHTML:e=>({close:e.close})}}),parseHTML:()=>[{tag:"math-display"}],renderHTML:({HTMLAttributes:e})=>["math-display",(0,r.P1)(e,{class:"math-node"}),0],addInputRules(){const e=this.options.allowedRules,t={[o.MathToken.DOLLARS]:N({find:S,type:this.type,getAttributes:{open:"$$",close:"$$"}}),[o.MathToken.ESCAPED_BRACKETS]:N({find:O,type:this.type,getAttributes:{open:"\\\\[",close:"\\\\]"}}),[o.MathToken.BRACKETS]:N({find:T,type:this.type,getAttributes:{open:"\\[",close:"\\]"}}),gitlab:N({find:/```math(.+)```/,type:this.type,getAttributes:{open:"```math",close:"```"}})};return e.map((e=>t[e]))},addCommands(){return{setFormulaBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleFormulaBlock:()=>({commands:e})=>{var t;const n=null!==(t=this.editor.storage.markdownExtensions.mathToken)&&void 0!==t?t:o.MathToken.DOLLARS;return e.toggleNode(this.name,"paragraph",function(e){switch(e){case o.MathToken.DOLLARS:return{open:"$$",close:"$$"};case o.MathToken.BRACKETS:return{open:"\\[",close:"\\]"};case o.MathToken.ESCAPED_BRACKETS:return{open:"\\\\[",close:"\\\\]"}}}(n))},unsetFormulaBlock:()=>({commands:e})=>e.unsetMark(this.name)}},addNodeView(){return({node:e,getPos:t})=>j(!0)(e,this.editor.view,t)}});var P=r.NB.create({name:"math_inline",group:"inline math",content:"text*",inline:!0,atom:!0,addOptions:()=>({allowedRules:[o.MathToken.DOLLARS]}),addStorage:()=>({markdown:{serialize(e,t){e.text(`${t.attrs.open}${t.textContent}${t.attrs.close}`,!1)},parse:{setup(e){const t=this.options.allowedRules;e.use(m,{delimiters:t,rules:"inline"})}}}}),parseHTML:()=>[{tag:"math-inline",getAttrs:e=>({open:e.getAttribute("open")||"$",close:e.getAttribute("close")||"$"})}],addAttributes:()=>({open:{default:"$",renderHTML:e=>({open:e.open})},close:{default:"$",renderHTML:e=>({close:e.close})}}),renderHTML:({HTMLAttributes:e})=>["math-inline",(0,r.P1)({class:"math-node"},e),0],addProseMirrorPlugins:()=>[C],addNodeView(){return({node:e,getPos:t})=>j(!1)(e,this.editor.view,t)},addInputRules(){const e=(e,t,n,o,s)=>{const a={open:o,close:s},i=this.type,l=t.from,c=t.to,d=e.doc.resolve(l),u=d.index(),p=e.doc.resolve(c),m=(0,r.nU)(a,void 0,n)||{};if(!d.parent.canReplaceWith(u,p.index(),i))return null;e.tr.replaceRangeWith(l,c,i.create(m,i.schema.text(n[1])))},t=this.options.allowedRules,n={[o.MathToken.DOLLARS]:new r.VK({find:/\$(.+)\$/,handler:({state:t,range:n,match:r})=>{e(t,n,r,"$","$")}}),[o.MathToken.ESCAPED_BRACKETS]:new r.VK({find:/\\\\\((.+)\\\\\)/,handler:({state:t,range:n,match:r})=>{e(t,n,r,"\\\\(","\\\\)")}}),[o.MathToken.BRACKETS]:new r.VK({find:/(?<!\\)\\\((.+?)\\\)/,handler:({state:t,range:n,match:r})=>{e(t,n,r,"\\(","\\)")}}),gitlab:new r.VK({find:/\$`(.+)`\$/,handler:({state:t,range:n,match:r})=>{e(t,n,r,"$`","`$")}})};return t.map((e=>n[e]))},addCommands(){return{setFormulaMark:e=>({commands:t})=>t.setMark(this.name,e),toggleFormulaMark:()=>({state:e,dispatch:t})=>{const{selection:n}=e,{from:r,to:s}=n;var a;const i=function(e){switch(e){case o.MathToken.DOLLARS:return{open:"$",close:"$"};case o.MathToken.BRACKETS:return{open:"\\(",close:"\\)"};case o.MathToken.ESCAPED_BRACKETS:return{open:"\\\\(",close:"\\\\)"}}}(null!==(a=this.editor.storage.markdownExtensions.mathToken)&&void 0!==a?a:o.MathToken.DOLLARS);let l=!1,c=null;if(e.doc.nodesBetween(r,s,((e,t)=>{e.type===this.type&&(l=!0,c=t)})),l&&null!==c){if(t){const n=e.tr,r=e.doc.nodeAt(c);if(r){const t=e.schema.text(function(e){let t="";return e.forEach((e=>{e.isText?t+=e.text:e.isLeaf&&(t+=e.textContent)})),t}(r.content));n.replaceRangeWith(c,c+r.nodeSize,t)}t(n)}return!0}if(t){const{tr:n}=e,o=e.doc.slice(r,s).content,a=this.type.create(i,o);n.replaceRangeWith(r,s,a),n.setSelection(f.Bs.create(n.doc,r+1,r+1)),t(n)}return!0},unsetFormulaMark:()=>({commands:e})=>e.unsetMark(this.name)}}});var M=r.hj.create({name:"MathExtensions",addOptions:()=>({allowedRules:[o.MathToken.DOLLARS]}),addExtensions(){return[E.configure({allowedRules:this.options.allowedRules}),P.configure({allowedRules:this.options.allowedRules})]}})},189058:function(e,t,n){n.d(t,{i:function(){return a}});var r=n(600787);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function a(e){return new RegExp("(?:^|\\s)("+e+"(\\w+(?:\\s\\w+)?))(?:[.!?:;\\s]|$)","g")}t.Z=r.ZP.extend({addOptions(){var e;return s({},null===(e=this.parent)||void 0===e?void 0:e.call(this),{char:"@",items:[],parseKnownOnly:!0})},addStorage(){var e;return s({},null===(e=this.parent)||void 0===e?void 0:e.call(this),{mention:{char:this.options.char,items:this.options.items,parseKnownOnly:this.options.parseKnownOnly},markdown:{serialize(e,t){var n;e.text(`${this.options.suggestion.char}${null!==(n=t.attrs.label)&&void 0!==n?n:t.attrs.id}`)},parse:{setup(e){const t=this.options.HTMLAttributes.class,n=this.options.suggestion.char,r=this.options.parseKnownOnly;e.use((e=>{e.renderer.rules.mention=(e,r)=>`<span class="${t}" data-type="mention" data-id="${e[r].content}">${n}${e[r].content}</span>`,e.core.ruler.after("inline","mention",(e=>{const t=a(n);e.tokens.forEach((e=>{if("inline"!==e.type)return;const{children:o}=e;var s;const a=null!==(s=null===o||void 0===o?void 0:o.flatMap((e=>{if("text"!==e.type)return[e];const o=[...e.content.matchAll(t)];if(!o.length)return[e];let s=0;const a=[];for(const t of o){const o=t.index+(t[0].startsWith(" ")?1:0),i=t.index+t[0].length;if(o>s&&a.push(Object.assign({},e,{type:"text",content:e.content.substring(s,o)})),r){const r=this.options.items.find((e=>t[2].startsWith(e.id)||t[2].startsWith(e.label)));if(r){a.push(Object.assign({},e,{type:"mention",content:null===r||void 0===r?void 0:r.label}));const o=t[0].trim().replace(n,"").replace(r.label,"");o.length&&a.push(Object.assign({},e,{type:"text",content:o}))}else a.push(Object.assign({},e,{type:"text",content:t[1]}));t[0].endsWith(" ")&&a.push(Object.assign({},e,{type:"text",content:" "}))}else a.push(Object.assign({},e,{type:"mention",content:t[2].trim()}));s=i}return s<e.content.length&&a.push(Object.assign({},e,{type:"text",content:e.content.substring(s)})),a})))&&void 0!==s?s:[];e.children=a}))}))}))}}}})}})},535589:function(e,t,n){var r=n(824246),o=n(827378),s=n(822933),a=n(928989),i=n(993240),l=n(634954),c=n(855549);function d({enableMath:e=!1}){const{editor:t}=(0,c.fi)();return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{name:"ReadOnlyFloatingMenu",shouldShow:({editor:e})=>!e.isEditable&&!e.state.selection.empty,children:(0,r.jsx)(l.k,{})}),(0,r.jsxs)(s.Z,{name:"EditableFloatingMenu",shouldShow:({editor:e})=>e.isEditable&&!e.state.selection.empty,children:[(0,r.jsx)(a.n3,{}),(0,r.jsx)(a.BI,{}),(0,r.jsx)(a.o0,{}),(0,r.jsx)(a.bt,{}),e&&(0,r.jsx)(i.R,{}),(0,r.jsx)(l.k,{})]})]}):null}t.Z=(0,o.memo)(d)},983876:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(824246),o=n(754866);function s({enableMath:e=!1}){return(0,r.jsxs)(o.qJ,{children:[(0,r.jsx)(o.h6,{}),(0,r.jsx)(o.JH,{}),(0,r.jsx)(o.n3,{}),(0,r.jsx)(o.BI,{}),(0,r.jsx)(o.o0,{}),(0,r.jsx)(o.bt,{}),(0,r.jsx)(o.pu,{}),(0,r.jsx)(o.cU,{}),(0,r.jsx)(o.nk,{}),(0,r.jsx)(o.Px,{}),(0,r.jsx)(o.zI,{}),(0,r.jsx)(o.Ou,{}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.tJ,{}),(0,r.jsx)(o.Rq,{})]})]})}},492325:function(e,t,n){n(824246),n(754866)},634954:function(e,t,n){n.d(t,{k:function(){return l}});var r=n(824246),o=n(713222),s=n(855549),a=n(827378),i=n(128157);function l(){const{editor:e}=(0,s.fi)(),{0:t,1:n}=(0,a.useState)(!1);(0,a.useEffect)((()=>{const t=(0,i.j)(e);if(!t)return;var r;r=t.enabled,n(r);const o=t.eventBus.on("enabledChange").subscribe((e=>n(e.data)));return()=>{o.unsubscribe()}}),[e]);const l=(0,a.useCallback)((()=>{const t=(0,i.j)(e);t&&e&&(e.state.selection.empty||t.eventBus.emit("selectionChange",{empty:!1,from:e.state.selection.from,to:e.state.selection.to,text:e.state.doc.content.textBetween(e.state.selection.from,e.state.selection.to)}),e.chain().focus().setCopilotOpen(!0).run())}),[e]);return e&&t?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(o.J,{tooltip:"Copilot",tooltipProps:{delayDuration:0},onClick:l,icon:"magnifying-glass",size:"sm"})}):null}},928989:function(e,t,n){n.d(t,{n3:function(){return l},BI:function(){return c},o0:function(){return d},bt:function(){return u}});var r=n(824246),o=n(713222),s=n(855549),a=n(643672);function i({type:e,icon:t,onToggle:n}){const{editor:i}=(0,s.fi)(),l=(0,a.Z)();return i?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(o.J,{tooltip:e,tooltipProps:{delayDuration:0},selected:i.isActive(e),onClick:()=>n(i),disabled:!l,icon:t,size:"sm"})}):null}const l=()=>(0,r.jsx)(i,{type:"bold",icon:"bold",onToggle:e=>e.chain().focus().toggleBoldWithDefaultToken().run()}),c=()=>(0,r.jsx)(i,{type:"italic",icon:"italic",onToggle:e=>e.chain().focus().toggleItalicWithDefaultToken().run()}),d=()=>(0,r.jsx)(i,{type:"strike",icon:"strikethrough",onToggle:e=>e.chain().focus().toggleStrike().run()}),u=()=>(0,r.jsx)(i,{type:"code",icon:"code-simple",onToggle:e=>e.chain().focus().toggleCode().run()})},993240:function(e,t,n){n.d(t,{t:function(){return i},R:function(){return l}});var r=n(824246),o=n(713222),s=n(855549),a=n(643672);function i(){const{editor:e}=(0,s.fi)(),t=(0,a.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(o.J,{tooltip:"Formula Block",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleFormulaBlock().run(),icon:"square-root-variable",size:"sm",selected:e.isActive("math_display"),disabled:!t})}):null}function l(){const{editor:e}=(0,s.fi)(),t=(0,a.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(o.J,{tooltip:"Inline Formula",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleFormulaMark().run(),icon:"less-than-equal",size:"sm",selected:e.isActive("math_inline"),disabled:!t})}):null}},754866:function(e,t,n){n.d(t,{n3:function(){return d.n3},Ou:function(){return m},tJ:function(){return v.t},Rq:function(){return v.R},bt:function(){return d.bt},BI:function(){return d.BI},pu:function(){return p},Tg:function(){return k},nk:function(){return f},JH:function(){return c},o0:function(){return d.o0},Px:function(){return g},zI:function(){return b},qJ:function(){return o},h6:function(){return l},cU:function(){return u}});var r=n(824246);const o=({children:e})=>(0,r.jsx)("div",{className:"flex border-solid border-neutral-300 border-b-[1px] bg-neutral-100 rounded-t-md overflow-x-auto",children:e});var s=n(713222),a=n(855549),i=n(643672);function l(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Undo",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().undo().run(),icon:"undo",size:"sm",disabled:!e.can().undo()||!t})}):null}function c(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Redo",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().redo().run(),icon:"redo",size:"sm",disabled:!e.can().redo()||!t})}):null}var d=n(928989);function u(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Unordered List",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleBulletListWithDefaultToken().run(),icon:"list-ul",size:"sm",selected:e.isActive("bulletList"),disabled:!t})}):null}function p(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Ordered List",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleOrderedList().run(),icon:"list-ol",size:"sm",selected:e.isActive("orderedList"),disabled:!t})}):null}function m(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Code Block",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleCodeBlock().run(),icon:"code",size:"sm",selected:e.isActive("codeBlock"),disabled:!t})}):null}function f(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return e?(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Quote",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().toggleBlockquote().run(),icon:"quote-left",size:"sm",selected:e.isActive("blockquote"),disabled:!t})}):null}var h=n(827378);function g(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)();return!e||(null===e||void 0===e?void 0:e.isActive("table"))?null:(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Insert Table",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run(),icon:"table",size:"sm",disabled:!t})})}function b(){const{editor:e}=(0,a.fi)(),t=(0,i.Z)(),n=(0,h.useCallback)((()=>{e&&(e.isActive("tableHeader")?e.chain().focus().deleteRow().toggleHeaderRow().run():e.chain().focus().deleteRow().run())}),[e]),o=(0,h.useCallback)((()=>{e&&(e.isActive("tableHeader")?e.chain().toggleHeaderRow().addRowBefore().command((({tr:t,chain:n})=>{if(e.isActive("table")){const{anchor:e}=t.selection;let r=0;return t.doc.descendants(((t,n)=>{"table"===t.type.name&&e>=n&&e<=n+t.nodeSize&&(r=n)})),n().focus(r+2).toggleHeaderRow(),!0}return!1})).run():e.chain().focus().addRowBefore().run())}),[e]);return e&&t&&e.isActive("table")?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"inline-block w-0.5 self-stretch bg-neutral-200"}),(0,r.jsx)("div",{className:"p-2 text-xs flex items-center",children:"Table:"}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Delete Table",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().deleteTable().run(),icon:"times",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Add row before",tooltipProps:{delayDuration:0},onClick:o,icon:"diagram-previous",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Add row after",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().addRowAfter().run(),icon:"diagram-next",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Delete row",tooltipProps:{delayDuration:0},onClick:n,icon:"diagram-cells",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Add column before",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().addColumnBefore().run(),icon:"border-left",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Add column after",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().addColumnAfter().run(),icon:"border-right",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(s.J,{tooltip:"Delete column",tooltipProps:{delayDuration:0},onClick:()=>e.chain().focus().deleteColumn().run(),icon:"border-none",size:"sm",disabled:!t})}),(0,r.jsx)("div",{className:"inline-block w-0.5 self-stretch bg-neutral-200"})]}):null}var v=n(993240),x=(n(535589),n(822933)),y=n(634954);function w(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(x.Z,{name:"PlaintextFloatingMenu",shouldShow:({editor:e})=>!e.state.selection.empty,children:(0,r.jsx)(y.k,{})})})}var k=(0,h.memo)(w);n(983876),n(492325)},822933:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(824246),o=n(855549);function s({name:e="FloatingMenu",shouldShow:t,children:n}){const{editor:s}=(0,o.fi)();return s?(0,r.jsx)(o.NM,{pluginKey:e,shouldShow:t,editor:s,tippyOptions:{duration:100},children:(0,r.jsx)("div",{className:"flex border-solid border-neutral-300 border bg-neutral-100 rounded-md shadow",children:n})}):null}},526604:function(e,t,n){var r=n(824246),o=n(827378),s=n(400507),a=n(722030),i=n(219502),l=n(257881),c=n(456552),d=n(693865),u=n(534522),p=n(232095),m=n(855549),f=n(276281),h=n(358720),g=n(128157);function b(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}const y=({enabled:e=!1,anchorRef:t,isLeftPosition:n=!1})=>{const{editor:v}=(0,m.fi)(),{0:y,1:w}=(0,o.useState)(!1),{0:k,1:j}=(0,o.useState)({from:0,to:0,empty:!0,text:void 0});(0,o.useEffect)((()=>{v&&(null===v||void 0===v||v.commands.setCopilotEnabled(e))}),[v,e]),(0,o.useEffect)((()=>{const e=(0,g.j)(v);if(!e)return;const t=e.eventBus.on("openChange").subscribe((e=>w(e.data))),n=e.eventBus.on("selectionChange").subscribe((e=>j(e.data)));return()=>{t.unsubscribe(),n.unsubscribe()}}),[v]);const C=(0,d.Z)(k.text,400),[S,T]=o.useState({}),O=[...(0,h.Xn)(p.InteractionStepType.PromptInput),...(0,h.Xn)(p.InteractionStepType.MultiTurnContinue)].flatMap((e=>e.context.referenceTexts||[])),{0:N,1:E}=(0,o.useState)(null),P=(0,o.useContext)(u.p),[M,R]=o.useState(0),{data:I,error:A,isLoading:D}=(0,c.useQuery)({queryFn:(L=function*(){return!C||C.length<=15?Promise.resolve({results:[],inferenceId:""}):l.Z.genai.fetchReviewerCopilotInference({content:C,taskId:P.taskId,projectId:P.projectId,assignmentId:P.assignmentId,referenceTexts:O})},function(){var e=this,t=arguments;return new Promise((function(n,r){var o=L.apply(e,t);function s(e){b(o,n,r,s,a,"next",e)}function a(e){b(o,n,r,s,a,"throw",e)}s(void 0)}))}),queryKey:[open,C],staleTime:1/0,enabled:e&&y});var L;(0,o.useEffect)((()=>{R(0),T({}),C||(w(!1),null===v||void 0===v||v.commands.setCopilotOpen(!1))}),[v,C]);const B=(0,o.useCallback)((()=>{v&&v.commands.setCopilotOpen(!1)}),[v]),_=k&&v&&k.from>=0&&k.from<=v.view.state.doc.content.size?v.view.coordsAtPos(k.from):void 0,$=_&&t.current?_.top-t.current.getBoundingClientRect().top:0,{styles:Z,attributes:z}=(0,f.D)(t.current,N,{placement:n?"left-start":"right-start",modifiers:[{name:"offset",options:{offset:[$,28]}},{name:"preventOverflow",options:{mainAxis:!1}}]});return!A&&v&&e&&y?(0,r.jsx)("div",x({ref:E,style:Z.popper},z.popper,{className:"z-30 flex",children:(0,r.jsxs)(i.p,{className:"w-80",children:[(0,r.jsxs)(i.p.Header,{className:"px-3 border-b border-neutral-200",children:[(0,r.jsx)(i.p.HeaderLeft,{children:(0,r.jsx)(i.p.Subtitle,{children:"Copilot"})}),(0,r.jsxs)(i.p.HeaderRight,{className:"gap-1 flex flex-row justify-start",children:[(null===I||void 0===I?void 0:I.results)&&I.results.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p.Button,{icon:"chevron-left",onClick:()=>{M>0&&R(M-1)},disabled:0===M}),(0,r.jsx)(i.p.Button,{icon:"chevron-right",onClick:()=>{(null===I||void 0===I?void 0:I.results)&&I.results.length&&M<I.results.length-1&&R(M+1)},disabled:M===I.results.length-1})]}),(0,r.jsx)(i.p.Button,{icon:"times",onClick:B})]})]}),(0,r.jsxs)(i.p.Body,{className:"border-t-0 mb-1",children:[D&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(a.$,{size:"sm"})}),(null===I||void 0===I?void 0:I.results)&&I.results.length>0&&M<I.results.length&&I.inferenceId&&(0,r.jsx)(s.e,{inferenceId:I.inferenceId,reviewerCopilotResult:I.results[M],hasFeedback:!!S[I.results[M].id],setFeedback:e=>{T((t=>x({},t,{[I.results[M].id]:e})))}}),(null===I||void 0===I?void 0:I.results)&&(!C||C.length<=15)&&(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{children:"The selection must be at least 15 characters long!"})})]})]})})):null};t.Z=(0,o.memo)(y)},534522:function(e,t,n){n.d(t,{p:function(){return r}});const r=(0,n(827378).createContext)({})},400507:function(e,t,n){n.d(t,{e:function(){return R}});var r=n(824246),o=n(827378),s=n(722030),a=n(776845),i=n(713222),l=n(412937),c=n(339389),d=n(416534),u=n(788524),p=n(37190),m=n(813110),f=n(219502),h=n(257881),g=n(456552),b=n(693865),v=n(854358),x=n(534522),y=n(784200),w=n(588039),k=n(441993),j=n(986910),C=n(358720),S=n(232095);function T(e,t,n,r,o,s,a){try{var i=e[s](a),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){T(s,r,o,a,i,"next",e)}function i(e){T(s,r,o,a,i,"throw",e)}a(void 0)}))}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=y.z.object({feedbackResponse:y.z.nativeEnum(v.FeedbackResponseType),errorCategory:y.z.string().optional(),otherFeedback:y.z.string().optional()}).refine((e=>e.feedbackResponse!==v.FeedbackResponseType.Dismiss||("Other"===e.errorCategory?void 0!==e.otherFeedback:void 0!==e.errorCategory)));var P;!function(e){e.IncorrectVerdict="Incorrect Verdict",e.IncorrectReasoning="Incorrect Reasoning",e.ReasoningTooWordy="Reasoning too wordy",e.IncorrectLinks="Incorrect Links",e.TooManyLinks="Too many links",e.IncorrectClaimHighlighted="Incorrect Claim Highlighted",e.Other="Other"}(P||(P={}));const M=({inferenceId:e,reviewerCopilotResult:t,hasFeedback:n,setFeedback:u})=>{const{handleSubmit:p,watch:m,setValue:f}=(0,w.cI)({mode:"onBlur",resolver:(0,k.F)(E)}),g=m("feedbackResponse"),b=m("errorCategory"),x=m("otherFeedback"),[y,C]=o.useState(!1),S=(0,o.useCallback)(function(){var n=O((function*(n){if(!y){C(!0);try{yield h.Z.genai.sendReviewerCopilotFeedback({inferenceId:e,claimId:t.id,result:n.feedbackResponse,errorCategory:n.errorCategory,otherFeedback:n.otherFeedback}),u(n)}catch(r){j.Am.error(r.message)}C(!1)}}));return function(e){return n.apply(this,arguments)}}(),[y,C,e,t.id,u]);return y?(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(s.$,{size:"sm"})}):n?(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(a.ZT.Paragraph2,{className:"font-medium",children:"Thank you for your feedback!"})}):(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(a.ZT.Paragraph2,{className:"font-medium",children:"Was this helpful/accurate?"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.J,{icon:[g===v.FeedbackResponseType.Accept?"fas":"far","thumbs-up"],size:"sm",onClick:()=>{f("feedbackResponse",v.FeedbackResponseType.Accept),p(S)()}}),(0,r.jsx)(i.J,{icon:[g===v.FeedbackResponseType.Dismiss?"fas":"far","thumbs-down"],size:"sm",onClick:()=>f("feedbackResponse",v.FeedbackResponseType.Dismiss)})]}),g===v.FeedbackResponseType.Dismiss&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(l.S,{label:"Select Error Category",options:Object.keys(P).map((e=>({id:e,name:P[e]}))),selectedOptionId:b||"",setSelected:e=>{f("errorCategory",e),e!==P.Other&&p(S)()}}),b===P.Other&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)(a.ZT.Paragraph2,{className:"font-medium",children:"Other Feedback:"}),(0,r.jsx)(c.K,{value:x,onChange:e=>f("otherFeedback",e.target.value),rows:2}),(0,r.jsx)(d.zx,{variant:"primary",size:"sm",onClick:p(S),className:"mt-2",children:"Submit"})]})]})]})},R=({inferenceId:e,reviewerCopilotResult:t,hasFeedback:n,setFeedback:o})=>{const{claim:s,verdict:i,reasoning:l,links:c}=t;return(0,r.jsxs)("div",{children:[s&&(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsxs)(a.ZT.Paragraph2,{children:[(0,r.jsx)("span",{className:"font-medium",children:"Claim:"})," ",s]})}),(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center mb-2",children:[(0,r.jsx)(a.ZT.Paragraph2,{className:"font-medium",children:"Validation Verdict:"}),(e=>{const t=e.toLowerCase();return t.includes("true")?(0,r.jsx)(u.V,{variant:"success",children:"True"}):t.includes("false")?(0,r.jsx)(u.V,{variant:"danger",children:"False"}):(0,r.jsx)(u.V,{variant:"neutral",children:e})})(i)]}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsxs)(a.ZT.Paragraph2,{children:[(0,r.jsx)("span",{className:"font-medium",children:"Reasoning:"})," ",l]})}),null===c||void 0===c?void 0:c.map(((e,t)=>(0,r.jsxs)("a",{className:"flex gap-1 items-center text-primary-400",target:"_blank",rel:"noopener noreferrer",href:e,children:[new URL(e).hostname,(0,r.jsx)(p.s,{icon:["fas","external-link-alt"],contrastText:!0,edge:"end",variant:"secondary"})]},t))),(0,r.jsx)(M,{inferenceId:e,reviewerCopilotResult:t,hasFeedback:n,setFeedback:o},t.id)]})};t.Z=()=>{const[e,t]=o.useState(!1),n=(0,m.y)((e=>e.selection)),a=(0,b.Z)(n.text,1e3),[l,c]=o.useState({}),d=[...(0,C.Xn)(S.InteractionStepType.PromptInput),...(0,C.Xn)(S.InteractionStepType.MultiTurnContinue)].flatMap((e=>e.context.referenceTexts||[])),u=(0,o.useContext)(x.p),[p,v]=o.useState(0),{data:y,error:w,isLoading:k}=(0,g.useQuery)({queryFn:O((function*(){return!a||a.length<=15?Promise.resolve({results:[],inferenceId:""}):h.Z.genai.fetchReviewerCopilotInference({content:a,taskId:u.taskId,projectId:u.projectId,assignmentId:u.assignmentId,referenceTexts:d})})),queryKey:[a],staleTime:1/0,enabled:e});o.useEffect((()=>{v(0),c({})}),[a]);return w?null:(0,r.jsx)(r.Fragment,{children:e?(0,r.jsxs)(f.p,{className:"w-80",children:[(0,r.jsxs)(f.p.Header,{className:"px-3 border-b border-neutral-200",children:[(0,r.jsx)(f.p.HeaderLeft,{children:(0,r.jsx)(f.p.Subtitle,{children:"Copilot"})}),(null===y||void 0===y?void 0:y.results)&&y.results.length>1&&(0,r.jsxs)(f.p.HeaderRight,{className:"gap-1 flex flex-row justify-start",children:[(0,r.jsx)(f.p.Button,{icon:"chevron-left",onClick:()=>{p>0&&v(p-1)},disabled:0===p}),(0,r.jsx)(f.p.Button,{icon:"chevron-right",onClick:()=>{(null===y||void 0===y?void 0:y.results)&&y.results.length&&p<y.results.length-1&&v(p+1)},disabled:p===y.results.length-1})]})]}),(0,r.jsxs)(f.p.Body,{className:"border-t-0 mb-1",children:[k&&(0,r.jsx)(s.$,{size:"sm"}),(null===y||void 0===y?void 0:y.results)&&y.results.length>0&&p<y.results.length&&y.inferenceId&&(0,r.jsx)(R,{inferenceId:y.inferenceId,reviewerCopilotResult:y.results[p],hasFeedback:!!l[y.results[p].id],setFeedback:e=>{c((t=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}({},t,{[y.results[p].id]:e})))}})]})]}):(0,r.jsx)(i.J,{icon:"magnifying-glass",size:"md",hasBackground:!0,className:"text-primary-400",onClick:()=>t(!0),tooltip:"Run fact-checking on the selected text."})})}},283888:function(e,t,n){n.d(t,{U:function(){return i}});var r=n(236125),o=n(527467);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}const i=(0,r.Ue)()((0,o.mW)(((e,t)=>({childIdToReadOnlyState:{},setReadOnlyStateForChildId:(t,n)=>e((e=>({childIdToReadOnlyState:a({},e.childIdToReadOnlyState,{[t]:n})}))),selectedCustomCodeEnvironment:{},setSelectedCustomCodeEnvironment:(t,n)=>e((e=>({selectedCustomCodeEnvironment:a({},e.selectedCustomCodeEnvironment,{[t]:n})}))),getSelectedCustomCodeEnvironment:e=>t().selectedCustomCodeEnvironment[e],scratchpadOpenState:{},setScratchpadOpenState:(t,n)=>e((e=>({scratchpadOpenState:a({},e.scratchpadOpenState,{[t]:n})}))),getScratchpadOpenState:e=>{var n;return null!==(n=t().scratchpadOpenState[e])&&void 0!==n&&n}}))))},63571:function(e,t,n){var r=n(827378);t.Z=function(e){const t=(0,r.useRef)(e);return t.current=e,t}},344660:function(e,t,n){n.d(t,{U:function(){return a}});var r=n(827378),o=n(534522),s=n(938910);function a(){const e=(0,r.useContext)(o.p),t=null===e||void 0===e?void 0:e.markdownSyntaxConfig;var n,a,i,l;return{boldToken:null!==(n=null===t||void 0===t?void 0:t.boldToken)&&void 0!==n?n:s.BoldToken.ASTERISK,italicToken:null!==(a=null===t||void 0===t?void 0:t.italicToken)&&void 0!==a?a:s.ItalicToken.ASTERISK,bulletListToken:null!==(i=null===t||void 0===t?void 0:t.bulletListToken)&&void 0!==i?i:s.BulletListToken.ASTERISK,mathToken:null!==(l=null===t||void 0===t?void 0:t.mathToken)&&void 0!==l?l:s.MathToken.DOLLARS}}},613911:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(827378);function o(e,t){const{0:n,1:o}=(0,r.useState)(e),s=(0,r.useRef)(null),a=(0,r.useRef)(!1);(0,r.useEffect)((()=>(a.current=!0,()=>{a.current=!1})),[]);return[n,(0,r.useCallback)((e=>{null!==s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{a.current&&o(e),s.current=null}),t)}),[o,t])]}},813110:function(e,t,n){n.d(t,{z:function(){return i},y:function(){return l}});var r=n(236125),o=n(527467);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}const i=(e,t)=>t?`${e.type}-${e.responseIndex}-${t}`:`${e.type}-${e.responseIndex}`,l=(0,r.Ue)()((0,o.mW)((0,o.XR)(((e,t)=>({workerComments:[],selectedWorkerComment:null,selection:{from:0,to:0,empty:!0,childId:""},addWorkerComment:t=>{t.comment.length&&e((e=>({workerComments:[...e.workerComments,t]})))},setWorkerComments:t=>{e({workerComments:t})},setSelection:t=>{e((e=>({selection:t})))},deleteSelection:()=>{e({selection:{from:0,to:0,empty:!0,childId:""}})},getAllWorkerComments:(e,n,r)=>t().workerComments.filter((t=>t.childId===e&&(null===t||void 0===t?void 0:t.locationStart)===n&&(null===t||void 0===t?void 0:t.locationEnd)===r)),selectWorkerComment:t=>{e((e=>({selectedWorkerComment:t})))},getWorkerComment:(e,n,r)=>t().workerComments.find((t=>t.childId===e&&(null===t||void 0===t?void 0:t.locationStart)===n&&(null===t||void 0===t?void 0:t.locationEnd)===r)),getWorkerCommentById:e=>t().workerComments.find((t=>t.workerCommentId===e)),updateWorkerComment:(t,n,r)=>{e((e=>({workerComments:e.workerComments.map((e=>e.workerCommentId===t?a({},e,{comment:n,title:null!==r&&void 0!==r?r:e.title}):e))})))},updateWorkerCommentLocation(t,n){e((e=>({workerComments:e.workerComments.map((e=>{if(e.workerCommentId===t){const[t,r]=n([e.locationStart,e.locationEnd]);return a({},e,{locationStart:t,locationEnd:r})}return e}))})))},batchUpdateWorkerCommentLocations(t){e((e=>{const n=t.map((e=>e.id));return{workerComments:e.workerComments.map((e=>{if(n.includes(e.workerCommentId)){const n=t.find((t=>t.id===e.workerCommentId)),[r,o]=n.updater([e.locationStart,e.locationEnd]);return a({},e,{locationStart:r,locationEnd:o})}return e}))}}))},deleteWorkerComment:t=>{e((e=>({workerComments:e.workerComments.filter((e=>e.workerCommentId!==t))})))},addFeedbackResponseToWorkerComment:(t,n)=>{e((e=>({workerComments:e.workerComments.map((e=>e.workerCommentId===t?a({},e,{feedbackResponse:n}):e))})))},resetWorkerCommentsFromResponseIndex:(t,n)=>{e((e=>{const r=t.slice(n+1).map((e=>i(e)));return{workerComments:e.workerComments.filter((e=>!e.childId||!r.includes(e.childId)))}}))}})))))},219502:function(e,t,n){n.d(t,{p:function(){return y}});var r=n(824246),o=n(827378),s=n(720227),a=n(792739),i=n(37190),l=n(916353),c=n(930640),d=n(983341),u=n(276281),p=n(92465),m=n.n(p),f=n(298784);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const v=(0,o.forwardRef)(((e,t)=>{const{badge:n,disabled:o,onClick:a,icon:c,selected:d,tooltip:u,tooltipProps:p,className:m,iconProps:f,enableDisabledTooltip:h}=e,b=(0,r.jsxs)("button",{ref:t,disabled:o,onClick:a,className:(0,s.m)("scaleui transition-all relative border-none focus:outline-none focus:ring-0 flex items-center justify-center rounded w-6 h-6 focus:bg-neutral-300",d&&"focus:bg-inherit bg-neutral-200",!d&&"hover:bg-neutral-200 ",o&&"cursor-not-allowed hover:bg-transparent",m),children:[(0,r.jsx)(i.s,{icon:c,variant:"neutral",size:"sm",disabled:o,contrastText:d,iconProps:f}),n&&(0,r.jsx)("div",{className:"absolute inline-flex items-center justify-center w-5 h-5 text-xs text-neutral-900 bg-primary-100 border border-neutral-0 rounded-full -top-2 -right-2",children:n})]});return u?(0,r.jsx)(l.u,g({text:u,target:b,disabled:o&&!h,delayDuration:0},p)):b})),x=(0,o.createContext)({cardReference:null,readOnly:!1}),y=Object.assign((e=>{const{className:t,children:n,readOnly:a=!1}=e,{0:i,1:l}=(0,o.useState)(null);return(0,r.jsx)("div",g({},e,{ref:l,className:(0,s.m)("w-full text-left border border-neutral-200 rounded-lg h-fit scaleui bg-neutral-0 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-400 transition-colors max-w-screen-xl",t),children:(0,r.jsx)(x.Provider,{value:{cardReference:i,readOnly:a},children:n})}))}),{Header:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("flex items-center justify-between w-full bg-neutral-50 rounded-t-lg py-2 px-4",t)}))},SubHeaderRow:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("flex w-full divide-x divide-neutral-200",t)}))},SubHeader:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("flex items-center justify-between w-full bg-neutral-50 px-4 py-2",t)}))},SubHeaderTitle:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("w-full text-neutral-600 font-medium text-xs",t)}))},HeaderColumn:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("w-full flex flex-col gap-[2px]",t)}))},HeaderLeft:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("flex items-center w-full gap-3",t)}))},HeaderRight:e=>{const{className:t,children:n}=e,{readOnly:a}=(0,o.useContext)(x);return(0,r.jsxs)("div",g({},e,{className:(0,s.m)("flex ml-2 gap-2 items-center",t),children:[a&&(0,r.jsx)("span",{className:"text-xs text-neutral-500 whitespace-nowrap",children:"Read-only"}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:n})]}))},Icon:e=>{const{className:t}=e;return(0,r.jsx)("div",{className:(0,s.m)("flex items-center justify-center rounded-full bg-neutral-0 border border-neutral-200 text-md text-neutral-500 w-8 h-8",t),children:(0,r.jsx)(a.G,g({},e))})},Image:e=>{const{className:t}=e,n=b(e,["className"]);return(0,r.jsx)("div",{className:(0,s.m)("flex items-center justify-center rounded-full bg-neutral-0 border border-neutral-200 text-md text-neutral-500 w-8 h-8",t),children:(0,r.jsx)("img",g({},n,{className:"rounded-full"}))})},Superscript:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("w-full text-neutral-600 font-normal text-[10px]",t)}))},Title:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("w-full text-neutral-600 font-semibold text-base",t)}))},Subtitle:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("w-full text-neutral-600 font-normal text-xs",t)}))},Button:v,Body:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("py-2 px-4 border-t border-neutral-100",t)}))},Footer:e=>{const{className:t}=e;return(0,r.jsx)("div",g({},e,{className:(0,s.m)("flex items-center w-full px-4 py-3 border-t border-neutral-100",t)}))},Popover:e=>{const{cardReference:t}=(0,o.useContext)(x),{0:n,1:a}=(0,o.useState)(null),{0:i,1:l}=(0,o.useState)(null),p=e.useStepCardReference?t:m()(e.referenceElement)?n:e.referenceElement;var h,y;const{styles:w,attributes:k}=(0,u.D)(p,i,{placement:null!==(h=e.placement)&&void 0!==h?h:"bottom-end",modifiers:null!==(y=e.modifiers)&&void 0!==y?y:[{name:"offset",options:{offset:[14,14]}}]}),{children:j,isOpen:C,className:S}=e,T=b(e,["children","isOpen","className"]);return(0,r.jsx)(c.J,{children:({open:t,close:o})=>{const u=m()(e.isOpen)?t:e.isOpen;return(0,r.jsxs)(r.Fragment,{children:[!e.disablePopoverButton&&(0,r.jsx)(c.J.Button,g({ref:a,as:v},T,{selected:u})),(0,r.jsx)(c.J.Panel,g({ref:l,style:w.popper},k.popper,{className:(0,s.m)("z-50",S),static:!m()(C),children:(0,r.jsx)(d.u,{show:u,appear:!0,enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-y-1",enterTo:"opacity-100 translate-y-0 ",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-1",children:(0,f.isFunction)(j)?j({close:()=>{var t;null===(t=e.onClose)||void 0===t||t.call(e),o()},buttonReference:n,panelReference:i,referenceElement:p}):j})}))]})}})},Context:x})},429451:function(e,t,n){n.d(t,{N:function(){return a}});var r=n(502872),o=n(416621),s=n(280598);class a{emit(e,t,n){this.subject.next({event:e,data:t,context:n})}on(e){return this.subject.asObservable().pipe((0,o.h)((t=>t.event===e)),(0,s.U)((e=>e)))}contextualize(e){return new i(this,e)}constructor(){this.subject=new r.x}}class i{emit(e,t){this.baseEventBus.emit(e,t,this.context)}on(e){return this.baseEventBus.on(e)}constructor(e,t){this.baseEventBus=e,this.context=t}}},759784:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(824246),o=n(827378),s=n(682603),a=n(516432),i=n.n(a);function l(e){return i()(e).replace(/\$([^$]+)\$/g,((e,t)=>t.replace(/\\[a-zA-Z]+/g,"").replace(/[{}]/g," ").replace(/[%&_]/g,"").replace(/\s+/g," ").trim()))}function c(e,t="en"){const n=new Intl.Segmenter(t,{granularity:"word"}).segment(e);let r=0,o=null;for(const s of n){if(s.isWordLike){if(o&&"-"===o.segment)continue;r++}o=s}return r}var d=n(358720),u=n(223841),p=n(44579);const m=({text:e,active:t=!0})=>{const{0:n,1:a}=(0,o.useState)(0),i=(0,d.t0)((e=>e.languageCode));(0,u.Z)((()=>{const t=c(l(e),i);a(t)}),200,[e,i]),(0,p.Z)((()=>{const t=c(l(e),i);a(t)}));const m=n.toLocaleString("en-US");return(0,r.jsx)(s.A,{label:`${m} words`,active:t})};var f=(0,o.memo)(m)},693865:function(e,t,n){var r=n(827378);t.Z=function(e,t){const{0:n,1:o}=(0,r.useState)(e);return(0,r.useEffect)((()=>{const n=setTimeout((()=>{o(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}}}]);